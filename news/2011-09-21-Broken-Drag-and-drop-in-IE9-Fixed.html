<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>2011-09-21 - Broken Drag-and-drop in IE9 Fixed | News | UIZE JavaScript Framework</title>
	<meta name="keywords" content="UIZE JavaScript Framework News "/>
	<meta name="description" content="An issue that was breaking the drag-and-drop functionality of the Uize.Widget.Drag class in IE9 has been fixed."/>
	<link rel="alternate" type="application/rss+xml" title="UIZE JavaScript Framework - Latest News" href="http://www.uize.com/latest-news.rss"/>
	<link rel="stylesheet" href="../css/page.css"/>
	<link rel="stylesheet" href="../css/page.simpledoc.css"/>
</head>

<body>

<script type="text/javascript" src="../js/Uize.js"></script>

<h1 class="document-title">
	<a id="page-homeLink" href="../index.html" title="UIZE JavaScript Framework home"></a>
	
	<a href="../news-2011.html" class="breadcrumb breadcrumbWithArrow">2011 NEWS</a>
	2011-09-21 - Broken Drag-and-drop in IE9 Fixed

</h1>

<div class="main">
<div class="contents0">
	<p>An issue that was breaking the drag-and-drop functionality of the <code><a href="../reference/Uize.Widget.Drag.html">Uize.Widget.Drag</a></code> class in IE9 has been fixed.</p>
	
	<p>Testing in Microsoft Internet Explorer 9 revealed an issue that was breaking the drag-and-drop functionality of the <code><a href="../reference/Uize.Widget.Drag.html">Uize.Widget.Drag</a></code> class in IE9. This problem was first pointed out by Tim Carter. The issue was being caused by a workaround for a "sticky drag" issue that happens in some older browsers, where clicking down and dragging the mouse outside the browser window and then releasing the mouse button would cause the drag operation to get stuck in the dragging state when mousing back into the browser window - even with the mouse button no longer being held down.</p>
	
	<p>Now, this workaround was being applied for all Internet Explorer versions, and was relying on the behavior in versions of IE prior to IE9 of reporting the mouse button being clicked in the <code>button</code> property of the event object, using the values <code>1</code> (left button), <code>2</code> (middle button), <code>4</code> (right button), or sums of these values when multiple buttons are pressed, or <code>0</code> when no button is pressed. With the new behavior in IE9, which conforms to the arguably retarded W3C standard for the <code>button</code> property (I usually like standards), the value <code>0</code> for the <code>button</code> property indicates that the left button is being pressed, and there is no value like <code>-1</code> to indicate that no button is being pressed. It is hard to argue that the value <code>0</code> shouldn't be used to indicate that no button is pressed, especially since it is the most convenient for a simple truthy test (eg. <code>if (event.button) {doShit ()}</code>).</p>
	
	<p>Fortunately, the workaround for the "sticky drag" issue is no longer needed in IE9, because IE9 does a respectable job of firing the necessary events to result in a drag operation being canceled when the mouse button is released while the pointer is outside the browser window. So, to avoid the whole ugly issue of trying to deal with the new reporting of mouse buttons being pressed, the workaround is now conditionalized for only older versions of IE (may they all die soon).</p>
	
	<p>With the latest update to the <code><a href="../reference/Uize.Widget.Drag.html">Uize.Widget.Drag</a></code> class, the drag-and-drop examples once again work and the world is a happy place of draggable sliders, marquees, image ports, dynamic collections, 3D rotation viewers, etc.</p>
</div>

</div>

<script type="text/javascript">

Uize.module ({
	required:[
		'UizeSite.Page.Doc.library',
		'UizeSite.Page.Doc'
	],
	builder:function () {(window.page = UizeSite.Page.Doc ()).wireUi ()}
});

</script>

</body></html>



