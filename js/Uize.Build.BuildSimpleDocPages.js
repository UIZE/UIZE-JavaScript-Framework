/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Build.BuildSimpleDocPages.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Build.BuildSimpleDocPages',required:['Uize.Wsh','Uize.Build.Util','Uize.Data.PathsTree','Uize.Doc.Simple','Uize.Doc.Sucker','Uize.String','Uize.Url'],builder:function(){var _a=function(){};_a.perform=function(_b){var _c=_b.urlDictionary,_d=_b.examplesByKeyword,_e=_b.alwaysBuild,_f='~SIMPLE-DOC-TEMPLATE.html.jst',_g,_h,_i=Uize.Wsh.getScriptFolderPath(),_j=_i.length+1,_k,_l='reference',_m=/\.simple$/i,_n=/\.js$/i;function _o(_p){return Uize.Url.from(_p).fileName;}function _q(_r){return _r.match(/(.*)\.[^\.]*$/)[1].replace(/-/g,' ');}function _s(_t){return function(_u,_v){if(!_h){_h=Uize.Build.Util.compileJstFile(_g);var _w=_g.slice(_j);_k=Uize.String.repeat('../',_w.length-_w.replace(/[\/\\]/g,'').length);}var _x=_t(_v);if(_x){var _y=_x.contentsTreeItems,_z=_y[0];return{outputText:_h({title:_x.metaData.title||_q(_u).replace(/(^|\s)[a-z]/g,function(_A){return _A.toUpperCase()}),description:(_z&&(_z.description||(_z.items[0]||{}).description))||'',body:_x.html})};}else{return{};}}}
Uize.Wsh.buildFiles({alwaysBuild:_e,targetFolderPathCreator:function(_B){var _C=Uize.Wsh.fileExists(_g=_B+'\\'+_f)?_B:null;if(_C)_h=null;return _C;},targetFilenameCreator:function(_u){return(_m.test(_u)?_u.replace(_m,'.html'):null);},fileBuilder:_s(function(_D){return Uize.Doc.Simple.build({data:_D,urlDictionary:_c,pathToRoot:_k,result:'full'})})});var _E='\\'+_b.moduleFolderPath,_F=_E.length,_G,_H=Uize.Data.PathsTree.fromList(Uize.Wsh.getFiles(_b.moduleFolderPath,_n,_o));Uize.Wsh.buildFiles({alwaysBuild:_e,logFileName:_b.logFileName?_b.logFileName.replace(/(\.\w+)$/,'-from-js-modules$1'):'',targetFolderPathCreator:function(_B){var _C=_B.slice(-_F)==_E?_i+'\\'+_l:null;if(_C)Uize.Wsh.fileExists(_g=_C+'\\'+_f)?(_h=null):(_C=null);;return _C;},targetFilenameCreator:function(_u){var _I=_n.test(_u)?_u.replace(_n,'.html'):null;if(_I)_G=_q(_u);return _I;},fileBuilder:_s(function(_J){var _K;Uize.module({required:_G,builder:function(){var _L=_c[_G];_c[_G]=null;_K=Uize.Doc.Sucker.toDocument(_J,{urlDictionary:_c,
pathToRoot:_k,result:'full',module:eval(_G),modulesTree:_H,examples:_d[_G]});_c[_G]=_L;}});return _K;})});};return _a;}});