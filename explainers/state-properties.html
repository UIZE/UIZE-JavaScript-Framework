<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>State Properties | Documentation | UIZE JavaScript Framework</title>
	<meta name="keywords" content="UIZE JavaScript Framework Documentation "/>
	<meta name="description" content="The UIZE JavaScript Framework eases state management in complex applications by implementing state oriented features, such as its state properties."/>
	<link rel="alternate" type="application/rss+xml" title="UIZE JavaScript Framework - Latest News" href="http://www.uize.com/latest-news.rss"/>
	<link rel="stylesheet" href="../css/page.css"/>
	<link rel="stylesheet" href="../css/page.simpledoc.css"/>
</head>

<body>

<script type="text/javascript" src="../js/Uize.js"></script>

<h1 class="document-title">
	<a id="page-homeLink" href="../index.html" title="UIZE JavaScript Framework home"></a>
	
	<a href="../javascript-explainers.html" class="breadcrumb breadcrumbWithArrow">EXPLAINERS</a>
	State Properties

</h1>

<div class="main">
<div id="page_contents" class="contents-tree-shell">
<ul>
	<li>Contents
		<ul>
			<li><a href="#1" title="The UIZE JavaScript Framework eases state management in complex applications by implementing state oriented features, such as its state properties.">1. Introduction</a>
				<ul>
					<li><a href="#1_1">1.1. State Oriented Programming</a>
						<ul>
							<li><a href="#1_1_1" title="An invaluable feature, when using JavaScript in the context of a Web document, is reflection.">1.1.1. The Joy of Reflection</a></li>
							<li><a href="#1_1_2" title="The UIZE JavaScript Framework adopts a similar tack, providing a state interface through its state properties mechanism.">1.1.2. Make It So</a></li>
						</ul>
					</li>
					<li><a href="#1_2" title="The state property mechanism provides a convenient system for managing state properties, including providing an easy way for code to...">1.2. Benefits of the State Property Mechanism</a></li>
					<li><a href="#1_3" title="It is not uncommon for the implementation of a class to utilize a combination of regular old properties and state properties.">1.3. State Properties vs. Regular Properties</a>
						<ul>
							<li><a href="#1_3_1" title="State properties are accessed through the set and get methods, unlike regular properties that are accessed normally.">1.3.1. Properties on Steroids</a></li>
						</ul>
					</li>
				</ul>
			</li>
			<li><a href="#2" title="At the most basic level, using state properties is pretty straightforward. Let&apos;s consider a few common operations...">2. The Basics</a>
				<ul>
					<li><a href="#2_1" title="State properties can be easily registered for a class, using the MyClass.registerProperties static method that is inherited from the Uize.Class base class, as follows...">2.1. Registering a State Property</a></li>
					<li><a href="#2_2" title="Once a state property has been registered, its value can be easily set using the set instance method that is inherited from the Uize.Class base class, as follows...">2.2. Setting a State Property's Value</a></li>
					<li><a href="#2_3" title="Once a state property has been registered, its value can be easily queried using the get instance method that is inherited from the Uize.Class base class, as follows...">2.3. Getting a State Property's Value</a></li>
					<li><a href="#2_4" title="Once a state property has been registered, its value can be easily set during construction of a new instance of your class, as follows...">2.4. Setting During Construction</a></li>
					<li><a href="#2_5" title="What good is a state property mechanism if it doesn&apos;t facilitate something useful?">2.5. Now It Gets Interesting</a></li>
				</ul>
			</li>
			<li><a href="#3">3. More on Setting Values</a>
				<ul>
					<li><a href="#3_1" title="Values for state properties should always be set using the set method.">3.1. Always Use Set</a></li>
					<li><a href="#3_2" title="It is possible, within the code module that registers a particular state property, to set a value for that property using the property&apos;s private name.">3.2. Setting a Value Using the Private Name</a></li>
					<li><a href="#3_3" title="Occasionally, it becomes necessary to set the value for a state property whose name is dynamically determined by an expression, or passed as a parameter to some method.">3.3. Setting a Value for a Dynamically Selected State Property</a></li>
					<li><a href="#3_4" title="The Uize.Class base class provides a convenient way to toggle the value of a boolean state property, in the form of the toggle instance method.">3.4. Toggling a State Property</a></li>
					<li><a href="#3_5" title="The set method lets you set values for multiple state properties in a single call.">3.5. Setting Values for Multiple State Properties</a></li>
				</ul>
			</li>
			<li><a href="#4">4. More on Getting Values</a>
				<ul>
					<li><a href="#4_1" title="When accessing the value for a particular state property inside the code module that registers that property, the private name can be used.">4.1. Using the Private Name</a></li>
					<li><a href="#4_2" title="Because the get method accepts a string parameter, specifying the name of the state property being accessed, getting values for properties that are dynamically determined by an expression (or passed as a parameter to some method) is easy.">4.2. Getting a Value for a Dynamically Selected State Property</a></li>
					<li><a href="#4_3" title="When an array of state property names is supplied to the get method, the method obtains the values for the specified properties and returns them in an object, where the keys of the object are the property names and the values are, well, the values.">4.3. Getting Values for Multiple State Properties</a>
						<ul>
							<li><a href="#4_3_1" title="The multiple state properties form of the get method is useful for obtaining &quot;bundles of state&quot; that can then be transferred to other instances using the set method.">4.3.1. Transferring State</a></li>
						</ul>
					</li>
					<li><a href="#4_4" title="When no parameter is specified in the call to the get method, the method obtains the values for all the registered properties and returns them in an object, where the keys of the object are the property names and the values are the property values.">4.4. Getting Values for All State Properties</a></li>
				</ul>
			</li>
			<li><a href="#5" title="As illustrated earlier, registering state properties is done by calling the MyClass.registerProperties static method on your class.">5. More on Registering State Properties</a>
				<ul>
					<li><a href="#5_1" title="The parameter passed to this method should be an object, whose properties&apos; names are the private/internal names for the state properties being registered, and where the value for each property is a profile for each state property.">5.1. Property Profiles</a></li>
					<li><a href="#5_2" title="The minimal profile is a shorthand for registering a state property, where the only thing being registered is a mapping between a private name and a public name.">5.2. The Minimal Profile</a></li>
					<li><a href="#5_3" title="Unlike The Minimal Profile, the complete profile lets you utilize the more advanced features of state properties, such as onChange handlers, conformer functions, value defaults, etc.">5.3. The Complete Profile</a></li>
					<li><a href="#5_4" title="For any state property, you can use either The Minimal Profile or The Complete Profile.">5.4. Mixing Profile Types</a></li>
					<li><a href="#5_5" title="If a public name is not specified for a state property, the public name is defaulted to be same as the private name. This offers two intriguing flavors of state properties (discussed below).">5.5. Public Name Defaulting</a>
						<ul>
							<li><a href="#5_5_1" title="By using an unscrunchable (effectively public) name for a state property&apos;s private name, and not specifying the public name so that it defaults to its unscrunchable private name, you end up with a &quot;naked&quot; state property whose value can be accessed outside of the implementation for a class (such as in application code) with a simple dereferencing.">5.5.1. Naked State Properties</a></li>
							<li><a href="#5_5_2" title="By using a scrunchable name for a state property&apos;s private name (this is the typical the case, of course), and by not specifying the public name so that it defaults to its private name, you end up with what is effectively a private state property that can only be used within the class that defines it.">5.5.2. Private State Properties</a></li>
						</ul>
					</li>
					<li><a href="#5_6" title="Through a facility of the name property in the profile of a state property, multiple alternate public names can be specified for a state property.">5.6. Public Aliases</a></li>
					<li><a href="#5_7" title="When using the The Complete Profile form to register a state property, an initial value for a property can be specified using the value property of the profile.">5.7. Initial Value</a></li>
					<li><a href="#5_8" title="When using the The Complete Profile form to register a state property, an onChange handler function can be registered to respond to changes in the property&apos;s value.">5.8. onChange</a>
						<ul>
							<li><a href="#5_8_1" title="An onChange handler registered for a state property is executed every time that the property&apos;s value changes - even when the property is initialized to an initial value during construction of an instance.">5.8.1. Executed Even on First Change</a></li>
							<li><a href="#5_8_2" title="An onChange handler registered for a state property is only executed when the value of the property changes - not on each attempt to set its value.">5.8.2. Only Executed on Changes</a></li>
							<li><a href="#5_8_3" title="An onChange handler registered for a state property is called as a method on the instance to which the state property belongs, so it can access other state and methods for the instance using the this keyword, including the current value for the property for which the handler is registered.">5.8.3. Called as Instance Method</a></li>
						</ul>
					</li>
					<li><a href="#5_9" title="When using the The Complete Profile form to register a state property, a conformer function can be registered to ensure that the value for the property is always conformed to be a valid value.">5.9. Conformer Function</a>
						<ul>
							<li><a href="#5_9_1" title="Your conformer function is executed before the value of the state property is changed.">5.9.1. The Conformer and onChange Handlers</a></li>
							<li><a href="#5_9_2" title="A conformer function can be used to validate a new value and effectively abort the set if a new value fails validation. In such cases, a failed validation will result in the state property remaining unchanged.">5.9.2. Abort a Set</a></li>
							<li><a href="#5_9_3" title="There are any number of ways that you can conform a value, and you can basically do anything you please inside a conformer function to produce a conformed value.">5.9.3. More Uses of Conformers</a>
								<ul>
									<li><a href="#5_9_3_1" title="A common use of a conformer is to keep the value of a state property within a desired range.">5.9.3.1. Conform to a Range</a></li>
									<li><a href="#5_9_3_2" title="A conformer function can be used to ensure that the value of a state property does not stray outside of a set of values that are valid for the property.">5.9.3.2. Conform to a Valid Values Set</a></li>
									<li><a href="#5_9_3_3" title="A conformer function can be used to ensure that the value being set for a state property always conforms to a desired type.">5.9.3.3. Enforce Type</a></li>
									<li><a href="#5_9_3_4" title="A conformer function can be used to ensure that a string state property&apos;s value never exceeds a desired maximum length.">5.9.3.4. Limit Length of String</a></li>
									<li><a href="#5_9_3_5" title="A conformer function can be used to ensure that a string state property&apos;s value is always in a desired case (eg. lowercase, or uppercase).">5.9.3.5. Enforce Case</a></li>
									<li><a href="#5_9_3_6" title="A conformer function can be used to provide a locking facility for a state property, so that it is unchangeable through the set method while it is locked.">5.9.3.6. Locking a State Property</a></li>
								</ul>
							</li>
						</ul>
					</li>
				</ul>
			</li>
			<li><a href="#6" title="The JavaScript Event System implemented in the UIZE JavaScript Framework implements events that allow code to watch on changes in the value of any and all state properties.">6. Changed Events</a>
				<ul>
					<li><a href="#6_1" title="The Changed.[propertyName] virtual event lets you watch on changes in value for specified state properties.">6.1. Changed.[propertyName] Virtual Event</a></li>
					<li><a href="#6_2" title="The Changed.&amp;#42; instance event is a wildcard event that is fired whenever one or more state properties change value as a result of a call to the set instance method.">6.2. Changed.* Wildcard Event</a></li>
				</ul>
			</li>
			<li><a href="#7" title="The Uize.Class base class provides an implementation for the valueOf Intrinsic Method, that returns the value of the special value state property.">7. The Special value State Property</a>
				<ul>
					<li><a href="#7_1" title="If a value state property is registered for a class, then application code can watch on changes in the value for an instance by registering a handler for the Change.value virtual event of the instance.">7.1. Watching For Value Changes</a></li>
					<li><a href="#7_2" title="The valueOf Intrinsic Method is implemented in the Uize.Class base class, so it is inherited by all subclasses of Uize.Class, including Uize.Widget and all subclasses of Uize.Widget, and all their subclasses, etc.">7.2. Any Class Can Implement Value Interface</a></li>
					<li><a href="#7_3" title="By using the Public Aliases mechanism, it is possible to name a state property something other than value while still leveraging the valueOf Intrinsic Method provision. Simply register two public names for the property: your desired name, and the special name value as an alias.">7.3. Value as an Alias</a></li>
				</ul>
			</li>
			<li><a href="#8">8. Advanced Topics</a>
				<ul>
					<li><a href="#8_1" title="Cases can arise where it is desirable to register a state property whose value is derived from the values of one or more other state properties, and that acts as a kind of state summary for the instance.">8.1. Derived State Properties</a></li>
					<li><a href="#8_2" title="There is no formal mechanism within the UIZE JavaScript Framework for declaring a state property as being read-only.">8.2. Read-only State Properties</a></li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
</div>

<div class="contents0">
	<a name="1"></a>
	<h1 class="heading1" title="1. Introduction"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>. </span>Introduction</h1>
	<div class="contents1">
		<p>The UIZE JavaScript Framework eases state management in complex applications by implementing state oriented features, such as its state properties.</p>
		
		<p>A cornerstone of the framework's state oriented design is its state property mechanism. This mechanism provides facilities for registering and managing state interfaces for classes and their instances.</p>
		
		<a name="1_1"></a>
		<h2 class="heading2" title="1. Introduction -&gt; 1.1. State Oriented Programming"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_1" title="1. Introduction -&gt; 1.1. State Oriented Programming">1</a>. </span>State Oriented Programming</h2>
		<div class="contents2">
			<a name="1_1_1"></a>
			<h3 class="heading3" title="1. Introduction -&gt; 1.1. State Oriented Programming -&gt; 1.1.1. The Joy of Reflection"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_1" title="1. Introduction -&gt; 1.1. State Oriented Programming">1</a>.<a href="#1_1_1" title="1. Introduction -&gt; 1.1. State Oriented Programming -&gt; 1.1.1. The Joy of Reflection">1</a>. </span>The Joy of Reflection</h3>
			<div class="contents3">
				<p>An invaluable feature, when using JavaScript in the context of a Web document, is <b>reflection</b>.</p>
				
				<p>The reflection of an element node's attributes and style properties to the JavaScript scripting language, combined with the ability of a document to modify itself through that language, provides an intuitive and lightweight way to modify the state of the user interface, without understanding the inner working of how state change is managed by the browser's layout / rendering engine.</p>
				
				<p>This is a huge load off the mind of a Web UI engineer, since undoubtedly there are any number of very clever ways in which handling state change is optimized for different scenarios, and undoubtedly there are any number of specific updater methods that are kicked off in carefully chosen order under different circumstances. The UI engineer doesn't have to care about what the browser has to do in order to synchronize the display to a changed state. The change could be minimal, or it could be very major.</p>
			</div>
			
			<a name="1_1_2"></a>
			<h3 class="heading3" title="1. Introduction -&gt; 1.1. State Oriented Programming -&gt; 1.1.2. Make It So"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_1" title="1. Introduction -&gt; 1.1. State Oriented Programming">1</a>.<a href="#1_1_2" title="1. Introduction -&gt; 1.1. State Oriented Programming -&gt; 1.1.2. Make It So">2</a>. </span>Make It So</h3>
			<div class="contents3">
				<p>The UIZE JavaScript Framework adopts a similar tack, providing a state interface through its state properties mechanism.</p>
				
				<p>In spirit, a widget class should expose its state through the state properties, and should register <code><a href="#5_8">onChange</a></code> handlers for these properties, as appropriate, in order to synchronize the UI to a changed state. The application developer using the widgets then does not have to worry about a suite of updater methods and understand why two should be used in a specific order in one case, but three should be used in any order in some other case (for example). We call this the <b>"make it so"</b> principle. You tell an instance what state it should be in, and it figures out how to get all its junk into that new state.</p>
			</div>
		</div>
		
		<a name="1_2"></a>
		<h2 class="heading2" title="1. Introduction -&gt; 1.2. Benefits of the State Property Mechanism"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_2" title="1. Introduction -&gt; 1.2. Benefits of the State Property Mechanism">2</a>. </span>Benefits of the State Property Mechanism</h2>
		<div class="contents2">
			<p>The state property mechanism provides a convenient system for managing state properties, including providing an easy way for code to...</p>
			
			<table class="list">
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>set defaults for a class's state properties</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>register code to handle changes in the values of state properties</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>register code to conform values of state properties</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>register aliases for state properties to ease backwards compatibility</td></tr>
			</table>
		</div>
		
		<a name="1_3"></a>
		<h2 class="heading2" title="1. Introduction -&gt; 1.3. State Properties vs. Regular Properties"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_3" title="1. Introduction -&gt; 1.3. State Properties vs. Regular Properties">3</a>. </span>State Properties vs. Regular Properties</h2>
		<div class="contents2">
			<p>It is not uncommon for the implementation of a class to utilize a combination of regular old properties and state properties.</p>
			
			<p>Regular properties are any old properties assigned on the class or its instances. State properties are specifically registered through the <code>MyClass.registerProperties</code> static method inherited from the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class.</p>
			
			<a name="1_3_1"></a>
			<h3 class="heading3" title="1. Introduction -&gt; 1.3. State Properties vs. Regular Properties -&gt; 1.3.1. Properties on Steroids"><span class="headingNumber"><a href="#1" title="1. Introduction">1</a>.<a href="#1_3" title="1. Introduction -&gt; 1.3. State Properties vs. Regular Properties">3</a>.<a href="#1_3_1" title="1. Introduction -&gt; 1.3. State Properties vs. Regular Properties -&gt; 1.3.1. Properties on Steroids">1</a>. </span>Properties on Steroids</h3>
			<div class="contents3">
				<p>State properties are accessed through the <code>set</code> and <code>get</code> methods, unlike regular properties that are accessed normally.</p>
				
				<p>In order to set a value for a registered state property, the <code>set</code> method must be used in order to obtain the benefits of <code><a href="#5_8">onChange</a></code> handlers, <code>conformer</code> functions, the <code>Change.*</code> virtual event, and other facilities provided in the state property mechanism. In a nutshell, state properties are properties on steroids. They have more intelligence.</p>
			</div>
		</div>
	</div>
	
	<a name="2"></a>
	<h1 class="heading1" title="2. The Basics"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>. </span>The Basics</h1>
	<div class="contents1">
		<p>At the most basic level, using state properties is pretty straightforward. Let's consider a few common operations...</p>
		
		<a name="2_1"></a>
		<h2 class="heading2" title="2. The Basics -&gt; 2.1. Registering a State Property"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>.<a href="#2_1" title="2. The Basics -&gt; 2.1. Registering a State Property">1</a>. </span>Registering a State Property</h2>
		<div class="contents2">
			<p>State properties can be easily registered for a class, using the <code>MyClass.registerProperties</code> static method that is inherited from the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class, as follows...</p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({_propertyName:'propertyName'});
</pre>
			
			<p>The above statement registers the state property with the public name <code>propertyName</code> and the private name <code>_propertyName</code>.</p>
		</div>
		
		<a name="2_2"></a>
		<h2 class="heading2" title="2. The Basics -&gt; 2.2. Setting a State Property&apos;s Value"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>.<a href="#2_2" title="2. The Basics -&gt; 2.2. Setting a State Property&apos;s Value">2</a>. </span>Setting a State Property's Value</h2>
		<div class="contents2">
			<p>Once a state property has been registered, its value can be easily set using the <code>set</code> instance method that is inherited from the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class, as follows...</p>
			
			
<pre class="sample-code">var myClass = new MyClass;
myClass.set ({propertyName:'propertyValue'});
</pre>
		</div>
		
		<a name="2_3"></a>
		<h2 class="heading2" title="2. The Basics -&gt; 2.3. Getting a State Property&apos;s Value"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>.<a href="#2_3" title="2. The Basics -&gt; 2.3. Getting a State Property&apos;s Value">3</a>. </span>Getting a State Property's Value</h2>
		<div class="contents2">
			<p>Once a state property has been registered, its value can be easily queried using the <code>get</code> instance method that is inherited from the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class, as follows...</p>
			
			
<pre class="sample-code">var myClass = new MyClass;
myClass.set ({propertyName:'propertyValue'});
alert (myClass.get ('propertyName'));
</pre>
			
			<p>In the above code, the <code>alert</code> statement will display the text <code>propertyValue</code> in the alert dialog.</p>
		</div>
		
		<a name="2_4"></a>
		<h2 class="heading2" title="2. The Basics -&gt; 2.4. Setting During Construction"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>.<a href="#2_4" title="2. The Basics -&gt; 2.4. Setting During Construction">4</a>. </span>Setting During Construction</h2>
		<div class="contents2">
			<p>Once a state property has been registered, its value can be easily set during construction of a new instance of your class, as follows...</p>
			
			
<pre class="sample-code">var myClass = new MyClass ({propertyName:'propertyValue'});
alert (myClass.get ('propertyName'));
</pre>
			
			<p>In the above code, the <code>alert</code> statement will display the text <code>propertyValue</code> in the alert dialog.</p>
		</div>
		
		<a name="2_5"></a>
		<h2 class="heading2" title="2. The Basics -&gt; 2.5. Now It Gets Interesting"><span class="headingNumber"><a href="#2" title="2. The Basics">2</a>.<a href="#2_5" title="2. The Basics -&gt; 2.5. Now It Gets Interesting">5</a>. </span>Now It Gets Interesting</h2>
		<div class="contents2">
			<p>What good is a state property mechanism if it doesn't facilitate something useful?</p>
			
			<p>Conforming a value is one such thing that is facilitated by the state property mechanism of the UIZE JavaScript Framework. When registering state properties it is possible to register a <code>conformer</code> function to enforce valid values. Let's consider an example...</p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
var myClass = new MyClass ({percentLoaded:200});
alert (myClass.get ('percentLoaded'));
</pre>
			
			<p>In the above code, the <code>alert</code> statement will display the text <code>100</code> in the alert dialog.</p>
			
			<p>This example uses the extended form for registering a state property that lets you define the property's "profile" (but we'll get into that in more detail a bit later). In the example, a <code>conformer</code> function is registered for the <code>percentLoaded</code> state property, that conforms the property's value so that it doesn't fall outside of the range of <code>0</code> to <code>100</code>. So, even though the code is trying to set the property's value to <code>200</code> during construction of an instance, the conformer conforms the value to not fall out of bounds.</p>
			
			<p>Custom conformer functions are discussed in more detail in the section <a href="#5_9">Conformer Function</a>.</p>
		</div>
	</div>
	
	<a name="3"></a>
	<h1 class="heading1" title="3. More on Setting Values"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>. </span>More on Setting Values</h1>
	<div class="contents1">
		<a name="3_1"></a>
		<h2 class="heading2" title="3. More on Setting Values -&gt; 3.1. Always Use Set"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>.<a href="#3_1" title="3. More on Setting Values -&gt; 3.1. Always Use Set">1</a>. </span>Always Use Set</h2>
		<div class="contents2">
			<p>Values for state properties should always be set using the <code>set</code> method.</p>
			
			<p>This is the only way to ensure that <code>conformer</code> functions and <code><a href="#5_8">onChange</a></code> handlers registered for state properties are invoked, and that handlers registered for the <a href="#6_1">Changed.[propertyName] Virtual Event</a> and the Changed.&#42; Wildcard Event are executed.</p>
			
			<p><span class="allCaps">INSTEAD OF...</span></p>
			
			
<pre class="sample-code">this._propertyName = 'propertyValue';
</pre>
			
			<p><span class="allCaps">USE...</span></p>
			
			
<pre class="sample-code">this.set ({propertyName:'propertyValue'});
</pre>
		</div>
		
		<a name="3_2"></a>
		<h2 class="heading2" title="3. More on Setting Values -&gt; 3.2. Setting a Value Using the Private Name"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>.<a href="#3_2" title="3. More on Setting Values -&gt; 3.2. Setting a Value Using the Private Name">2</a>. </span>Setting a Value Using the Private Name</h2>
		<div class="contents2">
			<p>It is possible, within the code module that registers a particular state property, to set a value for that property using the property's private name.</p>
			
			<p>For example, if a module registers a state property with the public name <code>propertyName</code> and the private name <code>_propertyName</code>, then code within that module could set a value for that property, using either the public or private name, as follows...</p>
			
			
<pre class="sample-code">this.set ({propertyName:'propertyValue'});   // using the public name
this.set ({_propertyName:'propertyValue'});  // using the private name
</pre>
			
			<p>Both of the above statements would have the same effect, provided that this code is within the implementation for some instance method within the code module that defines the class and all its state properties (and not some subclass or application code that uses the class). The benefit of using the private name is that it will be scrunched down by the Scruncher, thereby reducing the scrunched code size.</p>
		</div>
		
		<a name="3_3"></a>
		<h2 class="heading2" title="3. More on Setting Values -&gt; 3.3. Setting a Value for a Dynamically Selected State Property"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>.<a href="#3_3" title="3. More on Setting Values -&gt; 3.3. Setting a Value for a Dynamically Selected State Property">3</a>. </span>Setting a Value for a Dynamically Selected State Property</h2>
		<div class="contents2">
			<p>Occasionally, it becomes necessary to set the value for a state property whose name is dynamically determined by an expression, or passed as a parameter to some method.</p>
			
			<p>This can be done by using the form of the <code>set</code> method that takes two parameters: the name of a state property, and the value it should be set to.</p>
			
			<p>Consider the following example...</p>
			
			
<pre class="sample-code">_classPrototype.increment = function (_propertyName,_amount) {
  this.set (_propertyName,this.get (_propertyName) + _amount);
};
</pre>
			
			<p>In the above example, an instance method has been defined that accepts the name of a state property as its first parameter and an increment amount as its second parameter. Once the current value for the specified property has been retrieved using the <code>get</code> method, it is then incremented and set using the form of the <code>set</code> method that takes property name and value as its two parameters. Easy.</p>
		</div>
		
		<a name="3_4"></a>
		<h2 class="heading2" title="3. More on Setting Values -&gt; 3.4. Toggling a State Property"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>.<a href="#3_4" title="3. More on Setting Values -&gt; 3.4. Toggling a State Property">4</a>. </span>Toggling a State Property</h2>
		<div class="contents2">
			<p>The <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class provides a convenient way to toggle the value of a boolean state property, in the form of the <code>toggle</code> instance method.</p>
			
			<p><span class="allCaps">INSTEAD OF...</span></p>
			
			
<pre class="sample-code">myClass.set ({propertyName:!myClass.get ('propertyName')});
</pre>
			
			<p><span class="allCaps">USE...</span></p>
			
			
<pre class="sample-code">myClass.toggle ('propertyName');
</pre>
		</div>
		
		<a name="3_5"></a>
		<h2 class="heading2" title="3. More on Setting Values -&gt; 3.5. Setting Values for Multiple State Properties"><span class="headingNumber"><a href="#3" title="3. More on Setting Values">3</a>.<a href="#3_5" title="3. More on Setting Values -&gt; 3.5. Setting Values for Multiple State Properties">5</a>. </span>Setting Values for Multiple State Properties</h2>
		<div class="contents2">
			<p>The <code>set</code> method lets you set values for multiple state properties in a single call.</p>
			
			<p>The parameter passed to the <code>set</code> method is an object, containing values for all the state properties you wish to set.</p>
			
			<p><span class="allCaps">INSTEAD OF...</span></p>
			
			
<pre class="sample-code">myClass.set ({property1Name:'property1Value'});
myClass.set ({property2Name:'property2Value'});
myClass.set ({property3Name:'property3Value'});
</pre>
			
			<p><span class="allCaps">USE...</span></p>
			
			
<pre class="sample-code">myClass.set ({
  property1Name:'property1Value',
  property2Name:'property2Value',
  property3Name:'property3Value'
});
</pre>
			
			<p>In the above example, values for the <code>property1Name</code>, <code>property2Name</code>, and <code>property3Name</code> state properties are being set. There is no limit to the number of state properties that can be set in the same call to the <code>set</code> method.</p>
			
			<p>The performance benefits from calling the <code>set</code> method only once include...</p>
			
			<table class="list">
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>you're dereferencing the instance to access the <code>set</code> method only once, so less processor overhead</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>you're calling the method's function only once, so less processor overhead</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>you're creating a fresh object for the property values bundle only once, so less processor overhead</td></tr>
			<tr valign="top"><td><span style="white-space:nowrap;"><span class="bullet"></span> </span></td><td>any <code><a href="#5_8">onChange</a></code> handlers registered for all of the state properties will only get executed once for changes in any or all of the state properties' values, rather than for a change in each property's value (this is a more esoteric subject that is covered in more detail later on)</td></tr>
			</table>
		</div>
	</div>
	
	<a name="4"></a>
	<h1 class="heading1" title="4. More on Getting Values"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>. </span>More on Getting Values</h1>
	<div class="contents1">
		<a name="4_1"></a>
		<h2 class="heading2" title="4. More on Getting Values -&gt; 4.1. Using the Private Name"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>.<a href="#4_1" title="4. More on Getting Values -&gt; 4.1. Using the Private Name">1</a>. </span>Using the Private Name</h2>
		<div class="contents2">
			<p>When accessing the value for a particular state property inside the code module that registers that property, the private name can be used.</p>
			
			<p>For example, if a module registers a state property with the public name <code>propertyName</code> and the private name <code>_propertyName</code>, then code within that module could get the value for that property, using either the public or private name, as follows...</p>
			
			
<pre class="sample-code">alert (this.get ('propertyName'));  // using the public name
alert (this._propertyName);         // using the private name
</pre>
			
			<p>Both of the above statements would have the same effect, provided that this code is within the implementation for some instance method within the code module that defines the class and all its state properties (and not some subclass or application code that uses the class). The benefit of using the private name is that it will be scrunched down by the Scruncher, thereby reducing the scrunched code size.</p>
		</div>
		
		<a name="4_2"></a>
		<h2 class="heading2" title="4. More on Getting Values -&gt; 4.2. Getting a Value for a Dynamically Selected State Property"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>.<a href="#4_2" title="4. More on Getting Values -&gt; 4.2. Getting a Value for a Dynamically Selected State Property">2</a>. </span>Getting a Value for a Dynamically Selected State Property</h2>
		<div class="contents2">
			<p>Because the <code>get</code> method accepts a string parameter, specifying the name of the state property being accessed, getting values for properties that are dynamically determined by an expression (or passed as a parameter to some method) is easy.</p>
			
			<p>Consider the following example...</p>
			
			
<pre class="sample-code">_classPrototype.increment = function (_propertyName,_amount) {
  this.set (_propertyName,this.get (_propertyName) + _amount);
};
</pre>
			
			<p>In the above example, an instance method has been defined that accepts the name of a state property as its first parameter and an increment amount as its second parameter. The method then proceeds to increment the specified state property by the specified amount. Nothing special needs to be done to access the state property's value because the <code>get</code> method already takes a parameter for specifying the property's name.</p>
		</div>
		
		<a name="4_3"></a>
		<h2 class="heading2" title="4. More on Getting Values -&gt; 4.3. Getting Values for Multiple State Properties"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>.<a href="#4_3" title="4. More on Getting Values -&gt; 4.3. Getting Values for Multiple State Properties">3</a>. </span>Getting Values for Multiple State Properties</h2>
		<div class="contents2">
			<p>When an array of state property names is supplied to the <code>get</code> method, the method obtains the values for the specified properties and returns them in an object, where the keys of the object are the property names and the values are, well, the values.</p>
			
			<p>Let's consider an example...</p>
			
			
<pre class="sample-code">myClass.set ({
  property1Name:'property1Value',
  property2Name:'property2Value',
  property3Name:'property3Value',
  property4Name:'property4Value',
  property5Name:'property5Value'
});
var values = myClass.get (['property1Name','property2Name','property3Name']);
</pre>
			
			<p>In the above example, the values for five state properties are being set in the <code>set</code> method call. Then, the <code>get</code> method is being called with an array type value that specifies the names of just three of those properties, and its result is assigned to the <code>values</code> variable. After the code is executed, <code>values</code> will be an object with the contents...</p>
			
			
<pre class="sample-code">{
  property1Name:'property1Value',
  property2Name:'property2Value',
  property3Name:'property3Value'
}
</pre>
			
			<a name="4_3_1"></a>
			<h3 class="heading3" title="4. More on Getting Values -&gt; 4.3. Getting Values for Multiple State Properties -&gt; 4.3.1. Transferring State"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>.<a href="#4_3" title="4. More on Getting Values -&gt; 4.3. Getting Values for Multiple State Properties">3</a>.<a href="#4_3_1" title="4. More on Getting Values -&gt; 4.3. Getting Values for Multiple State Properties -&gt; 4.3.1. Transferring State">1</a>. </span>Transferring State</h3>
			<div class="contents3">
				<p>The multiple state properties form of the <code>get</code> method is useful for obtaining "bundles of state" that can then be transferred to other instances using the <code>set</code> method.</p>
				
				<p>This convenience provides for some code size optimization.</p>
				
				<p><span class="allCaps">INSTEAD OF...</span></p>
				
				
<pre class="sample-code">myClass2.set ({property1Name:myClass1.get ('property1Name')});
myClass2.set ({property2Name:myClass1.get ('property2Name')});
myClass2.set ({property3Name:myClass1.get ('property3Name')});
</pre>
				
				<p><span class="allCaps">USE...</span></p>
				
				
<pre class="sample-code">myClass2.set (myClass1.get (['property1Name','property2Name','property3Name']));
</pre>
				
				<p>The laborious first form is calling the get and set methods three times - one for each state property - in order to transfer the state of the properties from the instance <code>myClass1</code> to <code>myClass2</code>. The more concise second form performs only one get to obtain the state for all three properties from <code>myClass1</code>, and then supplies that property values object to the set method in order to set those values on <code>myClass2</code>.</p>
				
				<p>Besides just being more concise, the second form also may have performance benefits when writing classes with state properties that have sophisticated <code><a href="#5_8">onChange</a></code> handler code, in some cases avoiding multiple redundant updates from being triggered. The subject of <code><a href="#5_8">onChange</a></code> handlers and update optimization will be discussed in more detail later on.</p>
			</div>
		</div>
		
		<a name="4_4"></a>
		<h2 class="heading2" title="4. More on Getting Values -&gt; 4.4. Getting Values for All State Properties"><span class="headingNumber"><a href="#4" title="4. More on Getting Values">4</a>.<a href="#4_4" title="4. More on Getting Values -&gt; 4.4. Getting Values for All State Properties">4</a>. </span>Getting Values for All State Properties</h2>
		<div class="contents2">
			<p>When no parameter is specified in the call to the <code>get</code> method, the method obtains the values for <b>all</b> the registered properties and returns them in an object, where the keys of the object are the property names and the values are the property values.</p>
			
			<p>Let's consider an example...</p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _property1Name:{name:'property1Name',value:'property1Value'},
  _property2Name:{name:'property2Name',value:'property2Value'},
  _property3Name:{name:'property3Name',value:'property3Value'}
});
var
  myClass = new MyClass,
  values = myClass.get ()
;
</pre>
			
			<p>After the above code is executed, the <code>values</code> variable will be an object with the contents...</p>
			
			
<pre class="sample-code">{
  property1Name:'property1Value',
  property2Name:'property2Value',
  property3Name:'property3Value'
}
</pre>
		</div>
	</div>
	
	<a name="5"></a>
	<h1 class="heading1" title="5. More on Registering State Properties"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>. </span>More on Registering State Properties</h1>
	<div class="contents1">
		<p>As illustrated earlier, registering state properties is done by calling the <code>MyClass.registerProperties</code> static method on your class.</p>
		
		<a name="5_1"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.1. Property Profiles"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_1" title="5. More on Registering State Properties -&gt; 5.1. Property Profiles">1</a>. </span>Property Profiles</h2>
		<div class="contents2">
			<p>The parameter passed to this method should be an object, whose properties' names are the private/internal names for the state properties being registered, and where the value for each property is a profile for each state property.</p>
			
			<p>The profile for a state property can take two forms: <a href="#5_2">The Minimal Profile</a>, and <a href="#5_3">The Complete Profile</a>.</p>
		</div>
		
		<a name="5_2"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.2. The Minimal Profile"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_2" title="5. More on Registering State Properties -&gt; 5.2. The Minimal Profile">2</a>. </span>The Minimal Profile</h2>
		<div class="contents2">
			<p>The minimal profile is a shorthand for registering a state property, where the only thing being registered is a mapping between a private name and a public name.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">MyClass.registerProperties ({_propertyName:'propertyName'});
</pre>
			
			<p>In the above example, a state property is being registered, with the private name <code>_propertyName</code> and the public name <code>propertyName</code>. It can be accessed in the class' implementation in an instance method as <code>this._propertyName</code>, set in the class' implementation in an instance method as <code>this.set ({_propertyName:'propertyValue'})</code>, and set outside of the class' implementation in application code in a statement such as <code>myClass.set ({propertyName:'propertyValue'})</code> (where <code>myClass</code> is an instance of the class <code>MyClass</code>).</p>
			
			<p><span class="allCaps">IMPORTANT</span></p>
			
			<p>When registering state properties using the minimal profile, those properties cannot utilize the more advanced features of state properties, such as <code><a href="#5_8">onChange</a></code> handlers, <code>conformer</code> functions, <code>value</code> defaults, etc. that are available when using <a href="#5_3">The Complete Profile</a>. Without specifying an initial value for state properties using the <code>value</code> property of <a href="#5_3">The Complete Profile</a>, state properties will be initialized to the value <code>undefined</code> when creating new instances of a class.</p>
		</div>
		
		<a name="5_3"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.3. The Complete Profile"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_3" title="5. More on Registering State Properties -&gt; 5.3. The Complete Profile">3</a>. </span>The Complete Profile</h2>
		<div class="contents2">
			<p>Unlike <a href="#5_2">The Minimal Profile</a>, the complete profile lets you utilize the more advanced features of state properties, such as <code><a href="#5_8">onChange</a></code> handlers, <code>conformer</code> functions, <code>value</code> defaults, etc.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {
      if (this.isWired) this.setNodeValue ('percentLoaded',this._percentLoaded);
    },
    value:0
  }
});
</pre>
			
			<p>In the above example, a state property with the public name <code>percentLoaded</code> and the private name <code>_percentLoaded</code> is being registered.</p>
			
			<p>The <code>name</code> property in the profile specifies the property's public name. A <code>conformer</code> function is registered that is executed each time there is an attempt to set a new value for <code>percentLoaded</code>, and this function's implementation ensures that the property's value does not fall outside of the valid range of <code>0</code> to <code>100</code>. An <code><a href="#5_8">onChange</a></code> handler function is registered that is executed each time the value of <code>percentLoaded</code> changes, and this function's implementation displays the current value in a node in the document (we're assuming this code is transplanted from a widget class' implementation). Finally, the <code>value</code> property in the profile specifies the initial value for <code>percentLoaded</code>, for all freshly minted instances of <code>MyClass</code>.</p>
		</div>
		
		<a name="5_4"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.4. Mixing Profile Types"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_4" title="5. More on Registering State Properties -&gt; 5.4. Mixing Profile Types">4</a>. </span>Mixing Profile Types</h2>
		<div class="contents2">
			<p>For any state property, you can use either <a href="#5_2">The Minimal Profile</a> or <a href="#5_3">The Complete Profile</a>.</p>
			
			<p>So, when registering multiple state properties in one call to the <code>MyClass.registerProperties</code> static method, you can use a combination of both profile types, as suits your needs.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">MyClass.registerProperties ({
  _propertyName:'propertyName',
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {
      if (this.isWired) this.setNodeValue ('percentLoaded',this._percentLoaded);
    },
    value:0
  }
});
</pre>
			
			<p>In the above example, two state properties are being registered. <code>propertyName</code> is being registered using <a href="#5_2">The Minimal Profile</a>, while <code>percentLoaded</code> is being registered using <a href="#5_3">The Complete Profile</a>.</p>
		</div>
		
		<a name="5_5"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_5" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting">5</a>. </span>Public Name Defaulting</h2>
		<div class="contents2">
			<p>If a public name is not specified for a state property, the public name is defaulted to be same as the private name. This offers two intriguing flavors of state properties (discussed below).</p>
			
			<p>When registering a state property, one specifies a mapping between its private name and its public name. With the <a href="#5_2">The Minimal Profile</a>, this is done by specifying a string value for the key that represents the property's private name. With <a href="#5_3">The Complete Profile</a>, this is done by specifying a value for the <code>name</code> property in the profile object. Now, if the public name is <code>undefined</code>, <code>null</code>, or an empty string, then the public name will be defaulted to the private name.</p>
			
			<a name="5_5_1"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting -&gt; 5.5.1. Naked State Properties"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_5" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting">5</a>.<a href="#5_5_1" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting -&gt; 5.5.1. Naked State Properties">1</a>. </span>Naked State Properties</h3>
			<div class="contents3">
				<p>By using an unscrunchable (effectively public) name for a state property's private name, and not specifying the public name so that it defaults to its unscrunchable private name, you end up with a "naked" state property whose value can be accessed outside of the implementation for a class (such as in application code) with a simple dereferencing.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">MyClass.registerProperties ({
  prop1:null,        // private &amp; public name is prop1 - accessible as myClass.prop1
  prop2:'',          // private &amp; public name is prop2 - accessible as myClass.prop2
  prop3:{value:10},  // private &amp; public name is prop3 - accessible as myClass.prop3
  prop4:'prop4',     // SILLY!!! don't specify public name here - let it default
  prop5:{            // SILLY!!! don't specify public name here - let it default
    name:'prop5',
    value:10
  }
});
</pre>
				
				<p>In the above example, all the state properties have public names that are the same as their unscrunchable private names. While <code>prop1</code> should still be set using the <code>set</code> method, as in <code>myClass.set ({prop1:'value'})</code>, it can be accessed using a simple dereferencing, as in <code>myClass.prop1</code>.</p>
				
				<p><span class="allCaps">USE WITH CAUTION</span></p>
				
				<p>This technique doesn't offer the code size benefits of scrunching, but in certain <b>exceptional</b> cases it may offer sufficiently compelling performance benefits where it is more desirable to avoid an extra method call in order to access a state property's value. Using this technique should be the exception rather than the norm. It's not recommended, but it doesn't hurt to be aware of it.</p>
			</div>
			
			<a name="5_5_2"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting -&gt; 5.5.2. Private State Properties"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_5" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting">5</a>.<a href="#5_5_2" title="5. More on Registering State Properties -&gt; 5.5. Public Name Defaulting -&gt; 5.5.2. Private State Properties">2</a>. </span>Private State Properties</h3>
			<div class="contents3">
				<p>By using a scrunchable name for a state property's private name (this is the typical the case, of course), and by not specifying the public name so that it defaults to its private name, you end up with what is effectively a private state property that can only be used within the class that defines it.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">MyClass.registerProperties ({
  _prop1:null,         // private &amp; public name is _prop1 - will be scrunched
  _prop2:'',           // private &amp; public name is _prop2 - will be scrunched
  _prop3:{value:10},   // private &amp; public name is _prop3 - will be scrunched
  _prop4:'_prop4',     // WRONG!!! string literal '_prop4' won't be scrunched
  _prop5:{             // WRONG!!! string literal '_prop5' won't be scrunched
    name:'_prop5',
    value:10
  }
});
</pre>
				
				<p>In the above example, the state properties <code>_prop1</code>, <code>_prop2</code>, and <code>_prop3</code> are all private. Because their names will be scrunched, these names cannot be relied upon by application code outside of the class' implementation. Code inside the class can, however, access the properties (eg. <code>this.set ({_prop1:'value'})</code> or <code>this._prop1</code>). The benefit of a private state property is that you can employ the mechanisms that come with state properties, such as <code><a href="#5_8">onChange</a></code> handlers and <code>conformer</code> functions.</p>
				
				<p><span class="allCaps">IMPORTANT</span></p>
				
				<p>In contrast to <code>_prop1</code>, <code>_prop2</code>, and <code>_prop3</code>, <code>_prop4</code> and <code>_prop5</code> are not correctly registered as private state properties because the public name is specified in a string literal, which is not scrunched. So, these two state properties will be accessible outside the class' implementation as <code>_prop4</code> and <code>_prop5</code>. They won't be private!</p>
			</div>
		</div>
		
		<a name="5_6"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.6. Public Aliases"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_6" title="5. More on Registering State Properties -&gt; 5.6. Public Aliases">6</a>. </span>Public Aliases</h2>
		<div class="contents2">
			<p>Through a facility of the <code>name</code> property in the profile of a state property, multiple alternate public names can be specified for a state property.</p>
			
			<p>Basically, when you specify the public name of a state property you can specify a pipe-separated list of public names, of the form...</p>
			
			
<pre class="sample-code">'publicName1|publicName2|...|publicNameN'
</pre>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({_title:'title|displayTitle'});
var myClass = new MyClass;
myClass.set ({displayTitle:'HELLO'});
alert (myClass.get ('title'));
</pre>
			
			<p>In the above example, a state property is being registered for the class <code>MyClass</code>, with the two public names <code>title</code> and <code>displayTitle</code>. When creating an instance of <code>MyClass</code>, a call to set the value for <code>displayTitle</code> is equivalent to setting the value for <code>title</code>, since both public names map to the same underlying state property. So, in the above code, the <code>alert</code> statement will display the text <code>HELLO</code> in the alert dialog.</p>
			
			<p>Of course, aliases can be specified also when using <a href="#5_3">The Complete Profile</a>, as in...</p>
			
			
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title|displayTitle',
    conformer:function (_value) {
      // coerce to a string, default to empty string for null or undefined
      return _value == undefined ? '' : _value + '';
    },
    value:'untitled'
  }
});
</pre>
			
			<p><span class="allCaps">BENEFITS</span></p>
			
			<p>One of the benefits of public aliases for state properties is that it eases the evolution of interfaces over time. One can officially change the name of a state property, while deprecating the old name and continuing to support it for some time for backwards compatibility.</p>
		</div>
		
		<a name="5_7"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.7. Initial Value"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_7" title="5. More on Registering State Properties -&gt; 5.7. Initial Value">7</a>. </span>Initial Value</h2>
		<div class="contents2">
			<p>When using the <a href="#5_3">The Complete Profile</a> form to register a state property, an initial value for a property can be specified using the <code>value</code> property of the profile.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _propertyName:'propertyName',
  _active:{
    name:'active',
    onChange:function () {
      // do something
    }
  },
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
var myClass = new MyClass;
alert (myClass.get ('propertyName'));   // will alert the value undefined
alert (myClass.get ('active'));         // will alert the value undefined
alert (myClass.get ('percentLoaded'));  // will alert the value 0
</pre>
			
			<p>If a state property is registered using <a href="#5_2">The Minimal Profile</a>, or if it is registered using the <a href="#5_3">The Complete Profile</a> but no <code>value</code> property is specified in the profile, then the state property will be set to <code>undefined</code> for all freshly minted instances.</p>
		</div>
		
		<a name="5_8"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.8. onChange"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_8" title="5. More on Registering State Properties -&gt; 5.8. onChange">8</a>. </span>onChange</h2>
		<div class="contents2">
			<p>When using the <a href="#5_3">The Complete Profile</a> form to register a state property, an <code><a href="#5_8">onChange</a></code> handler function can be registered to respond to changes in the property's value.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {
      if (this.isWired) this.setNodeValue ('percentLoaded',this._percentLoaded);
    },
    value:0
  }
});
</pre>
			
			<p>In the above example, the <code>_percentLoaded</code> state property is being registered. An <code><a href="#5_8">onChange</a></code> handler function is registered that is executed each time the property's value changes, and this function's implementation displays the current value in a node in the document (we're assuming this code is transplanted from a widget class' implementation).</p>
			
			<a name="5_8_1"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.1. Executed Even on First Change"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_8" title="5. More on Registering State Properties -&gt; 5.8. onChange">8</a>.<a href="#5_8_1" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.1. Executed Even on First Change">1</a>. </span>Executed Even on First Change</h3>
			<div class="contents3">
				<p>An <code><a href="#5_8">onChange</a></code> handler registered for a state property is executed <b>every time</b> that the property's value changes - even when the property is initialized to an initial value during construction of an instance.</p>
				
				<p>During construction of an instance of a class, the value of each registered state property starts out as <code>undefined</code>. If an initial value is specified for the property (using the <code>value</code> property of the profile), then the value is set during construction, and a change in value from <code>undefined</code> to the specified initial value will trigger any <code><a href="#5_8">onChange</a></code> handler registered for the property.</p>
				
				<p><span class="allCaps">EXAMPLE 1</span></p>
				
				
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
function _updateArea () {
  this.set ({area:this._width * this._height});
}
MyClass.registerProperties ({
  _area:'area',
  _height:{
    name:'height',
    value:10,
    onChange:_updateArea
  },
  _width:{
    name:'width',
    value:10,
    onChange:_updateArea
  }
});
myClass = new MyClass;
alert (myClass.get ('area'));  // will alert the value 100
</pre>
				
				<p>In the above example, the <code>area</code> state property is registered. An <code><a href="#5_8">onChange</a></code> handler registered for each of the <code>width</code> and <code>height</code> state properties updates the value of <code>area</code> to be the product of <code>width</code> and <code>height</code>. Now, even though there is no call to the <code>set</code> method to set values for <code>width</code> and <code>height</code>, the value of <code>area</code> is correct immediately after construction of the <code>myClass</code> instance. This is because the <code><a href="#5_8">onChange</a></code> handler for <code>width</code> and <code>height</code> is executed the first time their values change from <code>undefined</code> to their registered initial value of <code>10</code>.</p>
				
				<p>This behavior can be both a good thing and a bad thing. Without a question, it's something that needs to be kept in mind when writing <code><a href="#5_8">onChange</a></code> handler code. In the previous example, it was actually a convenient behavior. However, in some cases it may be necessary to conditionalize some code inside an <code><a href="#5_8">onChange</a></code> handler in order to make sure it's not executed too early on in the setup of an instance, such as when not every aspect of the instance is fully set up and ready/safe for the <code><a href="#5_8">onChange</a></code> code to be executed.</p>
				
				<p><span class="allCaps">EXAMPLE 2</span></p>
				
				
<pre class="sample-code">MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {
      if (this.isWired) this.setNodeValue ('percentLoaded',this._percentLoaded);
    },
    value:0
  }
});
</pre>
				
				<p>In the above example, an <code><a href="#5_8">onChange</a></code> handler function is registered that is executed each time the value of <code>percentLoaded</code> changes, and this function's implementation displays the current value in a node in the document (we're assuming this code is transplanted from a widget class' implementation).</p>
				
				<p>In this particular case, we don't want to touch the DOM during construction of the instance and before the widget has been wired up, since this would drastically limit the flexibility of the widget class and how application code using the class could control setup of the application logic. So, in the <code><a href="#5_8">onChange</a></code> handler's implementation the code is conditionalized to check on the wired state of the instance. If the instance isn't wired yet, the DOM is not touched. Other cases like this may arise, where only certain aspects of handling a change in value of a state property should be enabled during construction.</p>
			</div>
			
			<a name="5_8_2"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.2. Only Executed on Changes"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_8" title="5. More on Registering State Properties -&gt; 5.8. onChange">8</a>.<a href="#5_8_2" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.2. Only Executed on Changes">2</a>. </span>Only Executed on Changes</h3>
			<div class="contents3">
				<p>An <code><a href="#5_8">onChange</a></code> handler registered for a state property is only executed when the value of the property changes - not on each attempt to set its value.</p>
				
				<p>So, for example, repeated attempts to set a state property to the same value will not result in repeated execution of the <code><a href="#5_8">onChange</a></code> handler - only for the first set that changes the property's value.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    onChange:function () {alert (this._percentLoaded)},
    value:0
  }
});
var myClass = new MyClass;         // will alert the text 0
myClass.set ({percentLoaded:10});  // will alert the text 10
myClass.set ({percentLoaded:10});  // does nothing (because value doesn't change)
myClass.set ({percentLoaded:10});  // does nothing (because value doesn't change)
myClass.set ({percentLoaded:10});  // does nothing (because value doesn't change)
</pre>
				
				<p>In the above example, there are four attempts to set the value of the <code>percentLoaded</code> state property to <code>10</code>. Only the first of those results in the property's value actually <b>changing</b> to <code>10</code>, so the <code><a href="#5_8">onChange</a></code> handler is only executed for the first of those sets, and you see the alert with the text "10" only once.</p>
				
				<p>Similarly, if a <code>conformer</code> function is defined for the state property, then multiple attemps to set different values could still result in the value changing only once, if, for example, the registered conformer function has the effect of constraining the value of the property to a range.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {alert (this._percentLoaded)},
    value:0
  }
});
var myClass = new MyClass;          // will alert the text 0
myClass.set ({percentLoaded:100});  // will alert the text 100
myClass.set ({percentLoaded:200});  // does nothing (because value stays 100)
myClass.set ({percentLoaded:300});  // does nothing (because value stays 100)
myClass.set ({percentLoaded:400});  // does nothing (because value stays 100)
</pre>
				
				<p>In the above example, there are four attempts to set the value of the <code>percentLoaded</code> state property. Only the first of those results in the property's value actually <b>changing</b> to <code>100</code>, so the <code><a href="#5_8">onChange</a></code> handler is only executed for the first of those sets, and you see the alert with the text "100" only once. The other three set attempts all result in the value being constrained to the upper limit of <code>100</code> by the conformer function, and so they produce no change in the property's value.</p>
			</div>
			
			<a name="5_8_3"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.3. Called as Instance Method"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_8" title="5. More on Registering State Properties -&gt; 5.8. onChange">8</a>.<a href="#5_8_3" title="5. More on Registering State Properties -&gt; 5.8. onChange -&gt; 5.8.3. Called as Instance Method">3</a>. </span>Called as Instance Method</h3>
			<div class="contents3">
				<p>An <code><a href="#5_8">onChange</a></code> handler registered for a state property is called as a method on the instance to which the state property belongs, so it can access other state and methods for the instance using the <code>this</code> keyword, including the current value for the property for which the handler is registered.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
function _updateArea () {
  this.set ({area:this._width * this._height});
}
MyClass.registerProperties ({
  _area:'area',
  _height:{
    name:'height',
    value:10,
    onChange:_updateArea
  },
  _width:{
    name:'width',
    value:10,
    onChange:_updateArea
  }
});
</pre>
				
				<p>In the above example, the <code>_updateArea</code> function is registered as the <code><a href="#5_8">onChange</a></code> handler for both the <code>width</code> and <code>height</code> state properties. Even though it is just a function and not registered as an instance method for the class (public <b>or</b> private), it is nevertheless called as a method of the instance whose state properties' values are changing. This is useful, because the handler code can then access state and methods for the instance. In this particular example, the handler is able to access the updated values for the <code>width</code> and <code>height</code> state properties in order to calculate a new value for the <code>area</code> state property.</p>
				
				<p>Being aware of this behavior, you can avoid certain redundancies in your code. For example, you can provide direct references to instance methods in your state property profiles, rather than redundant anonymous wrapper functions that merely call the methods.</p>
				
				<p><span class="allCaps">INSTEAD OF...</span></p>
				
				
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title',
    onChange:function () {this._updateUiTitle ()}
  }
});
</pre>
				
				<p><span class="allCaps">USE...</span></p>
				
				
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title',
    onChange:_classPrototype._updateUiTitle
  }
});
</pre>
				
				<p>NOTE: The variable <code>_classPrototype</code> is a common convention for a captured reference to a class' prototype object. In this case, <code>_classPrototype</code> would be equivalent to <code>MyClass.prototype</code>.</p>
			</div>
		</div>
		
		<a name="5_9"></a>
		<h2 class="heading2" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>. </span>Conformer Function</h2>
		<div class="contents2">
			<p>When using the <a href="#5_3">The Complete Profile</a> form to register a state property, a <code>conformer</code> function can be registered to ensure that the value for the property is always conformed to be a valid value.</p>
			
			<p>Normally, whatever value is specified for a state property when calling the <code>set</code> method is the new value that gets set for that property. However, specifying the optional conformer allows you to register a function that should be executed before the state property's value actually changes, providing an opportunity to constrain or correct the value, or to abort the set so that the property's value remains unchanged.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
var myClass = new MyClass ({percentLoaded:200});
alert (myClass.get ('percentLoaded'));
</pre>
			
			<p>In the above code, the <code>alert</code> statement will display the text <code>100</code> in the alert dialog.</p>
			
			<p>In the example, a <code>conformer</code> function is registered for the <code>percentLoaded</code> state property, that conforms the property's value so that it doesn't fall outside of the range of <code>0</code> to <code>100</code>. So, even though the code is trying to set the property's value to <code>200</code> during construction of an instance, the conformer conforms the value to not fall out of bounds.</p>
			
			<p><span class="allCaps">IN A NUTSHELL</span></p>
			
			<p>When you register a <code>conformer</code> function for a state property, that function gets executed each time there is an attempt to set a value for that property. Your conformer function should expect to receive one parameter, being the new value that is being attempted to be set. Your conformer function should do what it needs to in order to conform the new value, and then return the conformed value as its result. The conformer function is called as a method on the instance to which the state property belongs, so it can access other state and methods for the instance using the <code>this</code> keyword, including the current value for the property being set.</p>
			
			<a name="5_9_1"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.1. The Conformer and onChange Handlers"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_1" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.1. The Conformer and onChange Handlers">1</a>. </span>The Conformer and onChange Handlers</h3>
			<div class="contents3">
				<p>Your conformer function is executed before the value of the state property is changed.</p>
				
				<p>If the conformer function results in the value not changing, then any <code><a href="#5_8">onChange</a></code> handler function that you registered for the property will not get executed.</p>
				
				<p>Consider the following example...</p>
				
				
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    onChange:function () {alert (this._percentLoaded)},
    value:0
  }
});
var myClass = new MyClass;          // will alert the text 0
myClass.set ({percentLoaded:200});  // will alert the text 100
myClass.set ({percentLoaded:200});  // does nothing (because value doesn't change)
myClass.set ({percentLoaded:200});  // does nothing (because value doesn't change)
</pre>
				
				<p>Like the previous example, the <code>percentLoaded</code> state property has a conformer function registered that ensures that its value does not fall outside of the range of <code>0</code> to <code>100</code>. Additionally, an <code><a href="#5_8">onChange</a></code> handler function is registered that alerts the property's new value, each time it changes.</p>
				
				<p>Now, there are three calls to set the value of <code>percentLoaded</code> to <code>200</code>. Because the initial value of the property (as specified in the <code>value</code> property of the profile) is <code>0</code>, the first set will result in the value <code>200</code> being constrained to <code>100</code>, the <code>percentLoaded</code> state property will be set to this value, and the <code><a href="#5_8">onChange</a></code> handler will produce an alert dialog with the text <code>100</code>. However, the subsequent two calls to the <code>set</code> method will not cause the <code><a href="#5_8">onChange</a></code> handler to be executed, because on each occasion the value <code>200</code> will be conformed to <code>100</code>, there will be an attempt to set the property's value to <code>100</code>, and there will be no change in its value because its value was already conformed to <code>100</code> by the first set.</p>
			</div>
			
			<a name="5_9_2"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.2. Abort a Set"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_2" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.2. Abort a Set">2</a>. </span>Abort a Set</h3>
			<div class="contents3">
				<p>A <code>conformer</code> function can be used to validate a new value and effectively abort the set if a new value fails validation. In such cases, a failed validation will result in the state property remaining unchanged.</p>
				
				<p>The way this is accomplished is for the conformer function to return the current value for the state property in the event that the new value fails validation. Because the conformer function registered for a state property is called as a method on the instance to which the property belongs, the conformer can access other state and methods for the instance using the <code>this</code> keyword, including the current value for the property being set.</p>
				
				<p><span class="allCaps">EXAMPLE</span></p>
				
				
<pre class="sample-code">var _emailRegExp =
  /^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/
;
MyClass.registerProperties ({
  _emailAddress:{
    name:'emailAddress',
    conformer:function (_value) {
      return (
        typeof _value == 'string' &amp;&amp; (_value == '' || _emailRegExp.test (_value))
          ? _value
          : this._emailAddress
      );
    },
    value:''
  }
});
</pre>
				
				<p>In the above example, the <code>emailAddress</code> state property is being registered. The value of this property should be a well formed e-mail address. It may also be empty / unset, which is its initial value as specified in the <code>value</code> property of its profile. The conformer function first tests that a new value being set is a string. Then, it tests that the string is either empty or, if not, it uses a regular expression to determine if the non-empty value is a correctly formatted e-mail address.</p>
				
				<p>If the validation succeeds, the conformer returns the new value as its result. If validation fails, then the conformer returns the current value. Returning the current value results in the state property's value not changing, so this is effectively a way to abort a set.</p>
			</div>
			
			<a name="5_9_3"></a>
			<h3 class="heading3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>. </span>More Uses of Conformers</h3>
			<div class="contents3">
				<p>There are any number of ways that you can conform a value, and you can basically do anything you please inside a conformer function to produce a conformed value.</p>
				
				<p>That said, there are a number of typical ways that it is useful to conform the value for a state property.</p>
				
				<a name="5_9_3_1"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.1. Conform to a Range"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_1" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.1. Conform to a Range">1</a>. </span>Conform to a Range</h4>
				<div class="contents4">
					<p>A common use of a conformer is to keep the value of a state property within a desired range.</p>
					
					<p><span class="allCaps">EXAMPLE 1</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>percentLoaded</code> state property keeps the value of this property within the range of <code>0</code> to <code>100</code>.</p>
					
					<p><span class="allCaps">EXAMPLE 2</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _minWidth:{
    name:'minWidth',
    value:0
  },
  _maxWidth:{
    name:'maxWidth',
    value:Infinity
  },
  _width:{
    name:'width',
    conformer:function (_value) {
      return Uize.constrain (_value,this._minWidth,this._maxWidth);
    },
    value:0
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>width</code> state property keeps the value of this property within a legal range, as defined by the <code>minWidth</code> and <code>maxWidth</code> state properties. Initially, the minimum width is <code>0</code> and he maximum width is <code>Infinity</code> (ie. there is no upper limit).</p>
				</div>
				
				<a name="5_9_3_2"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.2. Conform to a Valid Values Set"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_2" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.2. Conform to a Valid Values Set">2</a>. </span>Conform to a Valid Values Set</h4>
				<div class="contents4">
					<p>A conformer function can be used to ensure that the value of a state property does not stray outside of a set of values that are valid for the property.</p>
					
					<p><span class="allCaps">EXAMPLE 1</span></p>
					
					
<pre class="sample-code">var _validTimeUnits =
  {ms:1,seconds:1,minutes:1,hours:1,days:1,weeks:1,months:1,years:1}
;
MyClass.registerProperties ({
  _timeUnit:{
    name:'timeUnit',
    conformer:function (_value) {
      return _validTimeUnits [_value] ? _value : this._timeUnit;
    },
    value:'hours'
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>timeUnit</code> state property makes sure that a value being set for this property falls within the valid time units <code>ms</code>, <code>seconds</code>, <code>minutes</code>, <code>days</code>, <code>weeks</code>, <code>months</code>, and <code>years</code>. When a new value is set, the <code>_validTimeUnits</code> hash lookup object is used by the conformer to see if the new value is in the set of valid time units. If so, the new value is returned. If an invalid time unit value is specified, then the current value is returned so that the set has no effect.</p>
					
					<p><span class="allCaps">EXAMPLE 2</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _fruit:{
    name:'fruit',
    conformer:function (_value) {
      return Uize.isIn (this._availableFruits,_value) ? _value : this._fruit;
    }
  },
  _availableFruits:{
    name:'availableFruits',
    value:[]
  }
});
</pre>
					
					<p>In the above example, the <code>fruit</code> state property has a companion <code>availableFruits</code> state property that allows a set of valid values to be specified for the <code>fruit</code> state property. The conformer for <code>fruit</code> uses the <code>Uize.isIn</code> static method to determine if the new value being set falls within the list of valid values specified by the <code>availableFruits</code> state property. If so, the new value is returned. If an invalid value is specified, then the current value is returned so that the set has no effect</p>
					
					<p><span class="allCaps">EXAMPLE 3</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _fruit:{
    name:'fruit',
    conformer:function (_value) {
      return this._availableFruits [Uize.indexIn (this._availableFruits,_value,0)];
    }
  },
  _availableFruits:{
    name:'availableFruits',
    value:[]
  }
});
</pre>
					
					<p>In a variation on the previous example, a failure in validating a new value being set for the <code>fruit</code> state property results in it being defaulted to the first value from the values set specified in the <code>availableFruits</code> state property.</p>
				</div>
				
				<a name="5_9_3_3"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.3. Enforce Type"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.3. Enforce Type">3</a>. </span>Enforce Type</h4>
				<div class="contents4">
					<p>A conformer function can be used to ensure that the value being set for a state property always conforms to a desired type.</p>
					
					<p><span class="allCaps">ENFORCE STRING TYPE</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title',
    conformer:function (_value) {return _value + ''}
    value:''
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>title</code> state property is coercing the type of the value being set for it to a string. By concatenating an empty string, JavaScript automatically invokes the <code>valueOf Intrinsic Method</code> for the new value. Essentially, adding an empty string has the effect of coercing the value to a string without altering the value. With such a conformer, the value being set for the <code>title</code> state property can be of type string, number, boolean, or an object that implements a <code>valueOf Intrinsic Method</code> (such as an instance of a <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> subclass that implements the <code>value</code> state property).</p>
					
					<p><span class="allCaps">ENFORCE NUMBER TYPE</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _width:{
    name:'width',
    conformer:function (_value) {return +_value}
    value:0
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>width</code> state property is coercing the type of the value being set for it to a number. By prepending the plus operator, JavaScript automatically invokes the <code>valueOf Intrinsic Method</code> for the new value, thereby coercing the value to a number without altering the value. With such a conformer, the value being set for the <code>width</code> state property can be of type string, number, boolean, or an object that implements a <code>valueOf Intrinsic Method</code> (such as an instance of a <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> subclass that implements the <code>value</code> state property).</p>
					
					<p><span class="allCaps">ENFORCE BOOLEAN TYPE - 1</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _active:{
    name:'active',
    conformer:function (_value) {return !!_value}
    value:false
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>active</code> state property is coercing the type of the value being set for it to a boolean. By prepending the two not operators, the value is coerced to a boolean without altering the true equivalency of the original value. With such a conformer, the value being set for the <code>active</code> state property can be of type string, number, boolean, object, or function. Any non-empty string will be turned into <code>true</code>, and an empty string will be turned into <code>false</code>. Any non-zero number will be turned into <code>true</code>, and <code>0</code> or <code>NaN</code> will be turned into <code>false</code>. Any object or function will be turned into <code>true</code>, and <code>null</code> or <code>undefined</code> will be turned into <code>false</code>.</p>
					
					<p><span class="allCaps">ENFORCE BOOLEAN TYPE - 2</span></p>
					
					
<pre class="sample-code">var _trueValues = {1:1,true:1,yes:1,on:1,enabled:1,active:1};
MyClass.registerProperties ({
  _showTitle:{
    name:'showTitle',
    conformer:function (_value) {return !!_trueValues [_value + '']}
    value:false
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>showTitle</code> state property is coercing the type of the value being set for it to a boolean. Unlike the previous example, this conformer turns certain specific values into <code>true</code> and all other values into <code>false</code>. The number value <code>1</code>, string value <code>'1'</code>, boolean value <code>true</code>, string value <code>'true'</code>, and the string values <code>'on'</code>, <code>'enabled'</code>, and <code>'active'</code> are all turned into <code>true</code>.</p>
					
					<p>An empty string is concatenated to the new value being set so that JavaScript invokes the <code>valueOf Intrinsic Method</code> for the value, allowing the value to be an object that implements a <code>valueOf Intrinsic Method</code> (such as an instance of a <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> subclass that implements the <code>value</code> state property). After coercing the value to a string, the <code>_trueValues</code> hash lookup object is used to test if the value is in the set of values considered equivalent to <code>true</code>.</p>
				</div>
				
				<a name="5_9_3_4"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.4. Limit Length of String"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.4. Limit Length of String">4</a>. </span>Limit Length of String</h4>
				<div class="contents4">
					<p>A conformer function can be used to ensure that a string state property's value never exceeds a desired maximum length.</p>
					
					<p><span class="allCaps">EXAMPLE</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title',
    conformer:function (_value) {
      _value += '';   // coerce to a string value, invoking valueOf
      return _value.length &gt; 50 ? _value.slice (0,50) : _value;
    },
    value:''
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>title</code> state property limits the length of its value to a maximum of fifty characters. The value is first coerced to a string by concatenating an empty string.</p>
				</div>
				
				<a name="5_9_3_5"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.5. Enforce Case"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_5" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.5. Enforce Case">5</a>. </span>Enforce Case</h4>
				<div class="contents4">
					<p>A conformer function can be used to ensure that a string state property's value is always in a desired case (eg. lowercase, or uppercase).</p>
					
					<p><span class="allCaps">EXAMPLE</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _filename:{
    name:'filename',
    conformer:function (_value) {return (_value + '').toLowerCase ()},
    value:''
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>filename</code> state property uses the <code>toLowerCase</code> string method to force the case of any new value to be lowercase. The value is first coerced to a string by concatenating an empty string.</p>
				</div>
				
				<a name="5_9_3_6"></a>
				<h4 class="heading4" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.6. Locking a State Property"><span class="headingNumber"><a href="#5" title="5. More on Registering State Properties">5</a>.<a href="#5_9" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function">9</a>.<a href="#5_9_3" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers">3</a>.<a href="#5_9_3_6" title="5. More on Registering State Properties -&gt; 5.9. Conformer Function -&gt; 5.9.3. More Uses of Conformers -&gt; 5.9.3.6. Locking a State Property">6</a>. </span>Locking a State Property</h4>
				<div class="contents4">
					<p>A conformer function can be used to provide a locking facility for a state property, so that it is unchangeable through the <code>set</code> method while it is locked.</p>
					
					<p>Locking can be based on some internal state of the instance to which the property belongs, or the state of some other dedicated locking state property.</p>
					
					<p><span class="allCaps">EXAMPLE</span></p>
					
					
<pre class="sample-code">MyClass.registerProperties ({
  _title:{
    name:'title',
    conformer:function (_value) {
      return this._titleLocked ? this._title : _value + '';
    },
    value:''
  },
  _titleLocked:{
    name:'titleLocked',
    value:false
  }
});
</pre>
					
					<p>In the above example, the conformer for the <code>title</code> state property only allows this property's value to be changed when the companion <code>titleLocked</code> state property is set to <code>false</code>.</p>
				</div>
			</div>
		</div>
	</div>
	
	<a name="6"></a>
	<h1 class="heading1" title="6. Changed Events"><span class="headingNumber"><a href="#6" title="6. Changed Events">6</a>. </span>Changed Events</h1>
	<div class="contents1">
		<p>The <a href="javascript-event-system.html">JavaScript Event System</a> implemented in the UIZE JavaScript Framework implements events that allow code to watch on changes in the value of any and all state properties.</p>
		
		<a name="6_1"></a>
		<h2 class="heading2" title="6. Changed Events -&gt; 6.1. Changed.[propertyName] Virtual Event"><span class="headingNumber"><a href="#6" title="6. Changed Events">6</a>.<a href="#6_1" title="6. Changed Events -&gt; 6.1. Changed.[propertyName] Virtual Event">1</a>. </span>Changed.[propertyName] Virtual Event</h2>
		<div class="contents2">
			<p>The <code>Changed.[propertyName]</code> virtual event lets you watch on changes in value for specified state properties.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
var myClass = new MyClass;
myClass.wire (
  'Changed.percentLoaded',  // name of changed event for percentLoaded
  function () {alert (myClass.get ('percentLoaded'))}
);
myClass.set ({percentLoaded:10});   // will alert the text 10
myClass.set ({percentLoaded:25});   // will alert the text 25
myClass.set ({percentLoaded:66});   // will alert the text 66
myClass.set ({percentLoaded:200});  // will alert the text 100 (because of conformer)
myClass.set ({percentLoaded:300});  // does nothing (because value doesn't change)
</pre>
			
			<p>In the above example, a handler is being registered for the changed event of the <code>percentLoaded</code> state property, which is named <code>Changed.percentLoaded</code> (basically, any state property has a changed virtual event that is named after that property, with "Changed." prefixed).</p>
			
			<p>Now, the handler for this event alerts the current value for the property. So, the first four of the <code>set</code> statements in the example will result in the value of <code>percentLoaded</code> changing, which will fire the <code>Changed.percentLoaded</code> virtual event, whose handler will display the current value in an alert dialog. Important to note is that the last <code>set</code> statement will not cause the value of <code>percentLoaded</code> to change. That's because the <code>conformer</code> function constrains its value to the range of <code>0</code> to <code>100</code>, and the previous attempt to set its value to <code>200</code> caused it to be constrained to the maximum in its range. Once constrained to <code>100</code>, attempting to set its value to <code>300</code> wouldn't budge it any higher from <code>100</code>. So, the last <code>set</code> statement doesn't cause the <code>Changed.percentLoaded</code> event to be fired, and no alert dialog.</p>
		</div>
		
		<a name="6_2"></a>
		<h2 class="heading2" title="6. Changed Events -&gt; 6.2. Changed.* Wildcard Event"><span class="headingNumber"><a href="#6" title="6. Changed Events">6</a>.<a href="#6_2" title="6. Changed Events -&gt; 6.2. Changed.* Wildcard Event">2</a>. </span>Changed.* Wildcard Event</h2>
		<div class="contents2">
			<p>The <code>Changed.&#42;</code> instance event is a wildcard event that is fired whenever one or more state properties change value as a result of a call to the <code>set</code> instance method.</p>
			
			<p>This event will only be fired once for all state properties that have changed value during a call to the <code>set</code> method. The event object for this event will contain a <code>properties</code> property, which is an object indicating which state properties have changed value, being a mapping between the public names of state properties that have changed and their new values.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var
  marquee1 = page.addChild ('marquee1',Uize.Widget.Resizer.Marquee),
  marquee2 = page.addChild ('marquee2',Uize.Widget.Resizer.Marquee)
;
marquee1.wire (
  'Changed.*',
  function (eventObj) {
    var properties = eventObj.properties;
    if (
      'left' in properties || 'top' in properties ||
      'width' in properties || 'height' in properties
    )
      marquee2.set (marquee1.getCoords ())
    ;
  }
);
</pre>
			
			<p>In the above example, two instances of the <code><a href="../reference/Uize.Widget.Resizer.Marquee.html">Uize.Widget.Resizer.Marquee</a></code> widget class are being added as child widgets to the page widget (which we assume to already be defined). A handler is wired to the <code>Changed.&#42;</code> wildcard event of the first instance, <code>marquee1</code>. The handler tests to see if any of the state properties <code>left</code>, <code>top</code>, <code>width</code>, or <code>height</code> have changed by checking if any of these keys are present in <code>properties</code> property of the event object for the <code>Changed.&#42;</code> event. If any of these properties have changed value, the <code>getCoords</code> instance method is used to get the values for those properties, and those values are set on the second instance, <code>instance2</code>. This code would have the effect of making <code>instance1</code> be the "driver" of <code>instance2</code>.</p>
		</div>
	</div>
	
	<a name="7"></a>
	<h1 class="heading1" title="7. The Special value State Property"><span class="headingNumber"><a href="#7" title="7. The Special value State Property">7</a>. </span>The Special value State Property</h1>
	<div class="contents1">
		<p>The <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class provides an implementation for the <code>valueOf Intrinsic Method</code>, that returns the value of the special <code>value</code> state property.</p>
		
		<p>The <code>valueOf Intrinsic Method</code> is invoked automatically by Javascript in certain contexts in order to convert an object to a value, such as when using an object reference in an expression. If you register the special <code>value</code> state property for your class, then you will be able to use a reference to an instance of your class in string and mathematical expressions, and your instance reference will be automatically converted to the value of the <code>value</code> state property in such expressions. This is a handy shorthand that allows you to use a reference to a class instance as a proxy for its value in expressions.</p>
		
		<p><span class="allCaps">EXAMPLE</span></p>
		
		
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _value:{
    name:'value',
    value:0
  }
});
var myClass = new MyClass ({value:123);
alert (+myClass);               // will alert the text 123
alert (myClass + '');           // will alert the text 123
alert (myClass.valueOf ());     // will alert the text 123
alert (myClass.get ('value'));  // will alert the text 123
</pre>
		
		<p>In the above example, the special <code>value</code> state property is being registered for the class <code>MyClass</code>. The initial value for this property is <code>0</code>, as specified in the <code>value</code> property of its profile (don't confuse the special <code>value</code> state property with the <code>value</code> property of a state property's profile that lets you specify the initial value for a property).</p>
		
		<p>As illustrated in this example, the value of the special <code>value</code> state property of the instance <code>myClass</code> can be accessed as: <code>+myClass</code> (coercing its type to number), <code>myClass + ''</code> (coercing its type to string), <code>myClass.valueOf ()</code> (leaves type unchanged), or <code>myClass.get ('value')</code> (leaves type unchanged). Of the various ways that the <code>value</code> state property can be accessed, using the <code>get</code> method is the least efficient. So, using the other techniques might be helpful in very heavily hit code that calls for hardcore performance optimization measures. As with other state properties, the value of the special <code>value</code> state property can be set using the <code>set</code> method, as in <code>myClass.set ({value:'newValue'})</code>.</p>
		
		<a name="7_1"></a>
		<h2 class="heading2" title="7. The Special value State Property -&gt; 7.1. Watching For Value Changes"><span class="headingNumber"><a href="#7" title="7. The Special value State Property">7</a>.<a href="#7_1" title="7. The Special value State Property -&gt; 7.1. Watching For Value Changes">1</a>. </span>Watching For Value Changes</h2>
		<div class="contents2">
			<p>If a <code>value</code> state property is registered for a class, then application code can watch on changes in the value for an instance by registering a handler for the <code>Change.value</code> virtual event of the instance.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _value:{
    name:'value',
    value:0
  }
});
var myClass = new MyClass;
myClass.wire ('Changed.value',function () {alert (+myClass)});
myClass.set ({value:10});  // will alert the text 10
</pre>
			
			<p>In the above code, a handler is registered for the <code>Changed.value</code> event of the instance <code>myClass</code>. Setting the <code>value</code> state property to <code>10</code> causes its value to change from its initial value of <code>0</code> (as specified in the <code>value</code> property of its profile), thereby firing the <code>Changed.value</code> virtual event, and the handler for this event alerts the current value by prepending the plus ("+") operator to the instance reference, invoking the <code>valueOf Intrinsic Method</code>.</p>
		</div>
		
		<a name="7_2"></a>
		<h2 class="heading2" title="7. The Special value State Property -&gt; 7.2. Any Class Can Implement Value Interface"><span class="headingNumber"><a href="#7" title="7. The Special value State Property">7</a>.<a href="#7_2" title="7. The Special value State Property -&gt; 7.2. Any Class Can Implement Value Interface">2</a>. </span>Any Class Can Implement Value Interface</h2>
		<div class="contents2">
			<p>The <code>valueOf Intrinsic Method</code> is implemented in the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class, so it is inherited by all subclasses of <code><a href="../reference/Uize.Class.html">Uize.Class</a></code>, including <code><a href="../reference/Uize.Widget.html">Uize.Widget</a></code> and all subclasses of <code><a href="../reference/Uize.Widget.html">Uize.Widget</a></code>, and all their subclasses, etc.</p>
			
			<p>To take advantage of this facility, all you need to do is register a state property with the public name <code>value</code>.</p>
		</div>
		
		<a name="7_3"></a>
		<h2 class="heading2" title="7. The Special value State Property -&gt; 7.3. Value as an Alias"><span class="headingNumber"><a href="#7" title="7. The Special value State Property">7</a>.<a href="#7_3" title="7. The Special value State Property -&gt; 7.3. Value as an Alias">3</a>. </span>Value as an Alias</h2>
		<div class="contents2">
			<p>By using the <a href="#5_6">Public Aliases</a> mechanism, it is possible to name a state property something other than <code>value</code> while still leveraging the <code>valueOf Intrinsic Method</code> provision. Simply register two public names for the property: your desired name, and the special name <code>value</code> as an alias.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
MyClass.registerProperties ({
  _percentLoaded:{
    name:'percentLoaded|value',
    conformer:function (_value) {return Uize.constrain (_value,0,100)},
    value:0
  }
});
var myClass = new MyClass ({percentLoaded:10});
alert (myClass.get ('percentLoaded'));  // will alert the text 10
alert (myClass.get ('value'));          // will alert the text 10
alert (+myClass);                       // will alert the text 10
</pre>
			
			<p>In the above example, the <code>percentLoaded</code> state property is being registered. Even though this property might represent the primary value for instances of the class, it is desirable for the property's name to be <code>percentLoaded</code> (rather than the more generic <code>value</code>) for general usability/understandability of the class' interface. However, it would be nice to still be able to get the benefit of the <code>valueOf Intrinsic Method</code>. Not a problem. This is accomplished by naming the state property both <code>percentLoaded</code> <b>AND</b> <code>value</code>. Notice how the three last statements in the example all produce the same output.</p>
		</div>
	</div>
	
	<a name="8"></a>
	<h1 class="heading1" title="8. Advanced Topics"><span class="headingNumber"><a href="#8" title="8. Advanced Topics">8</a>. </span>Advanced Topics</h1>
	<div class="contents1">
		<a name="8_1"></a>
		<h2 class="heading2" title="8. Advanced Topics -&gt; 8.1. Derived State Properties"><span class="headingNumber"><a href="#8" title="8. Advanced Topics">8</a>.<a href="#8_1" title="8. Advanced Topics -&gt; 8.1. Derived State Properties">1</a>. </span>Derived State Properties</h2>
		<div class="contents2">
			<p>Cases can arise where it is desirable to register a state property whose value is derived from the values of one or more other state properties, and that acts as a kind of state summary for the instance.</p>
			
			<p><span class="allCaps">EXAMPLE</span></p>
			
			
<pre class="sample-code">var MyClass = Uize.Class.subclass ();
function _updateArea () {
  this.set ({area:this._width * this._height});
}
MyClass.registerProperties ({
  _area:'area',
  _height:{
    name:'height',
    value:10,
    onChange:_updateArea
  },
  _width:{
    name:'width',
    value:10,
    onChange:_updateArea
  }
});
myClass = new MyClass;
alert (myClass.get ('area'));         // will alert the value 100

myClass.set ({width:5});
alert (myClass.get ('area'));         // will alert the value 50

myClass.set ({height:5});
alert (myClass.get ('area'));         // will alert the value 25

myClass.set ({width:20,height:20});
alert (myClass.get ('area'));         // will alert the value 400
</pre>
			
			<p>In the above example, the <code>area</code> state property is being registered. This property is not intended to be set by an application, since its value is derived in the class' implementation from the values of two other state properties registered for the class: <code>width</code> and <code>height</code>. An <code><a href="#5_8">onChange</a></code> handler function is registered in the profile for each of the <code>width</code> and <code>height</code> state properties. If the value of either (or both) of these properties changes, then the <code>_updateArea</code> function is called as a method on the instance, and this function sets a new value for the <code>area</code> state property that is the product of the <code>width</code> and <code>height</code> values.</p>
		</div>
		
		<a name="8_2"></a>
		<h2 class="heading2" title="8. Advanced Topics -&gt; 8.2. Read-only State Properties"><span class="headingNumber"><a href="#8" title="8. Advanced Topics">8</a>.<a href="#8_2" title="8. Advanced Topics -&gt; 8.2. Read-only State Properties">2</a>. </span>Read-only State Properties</h2>
		<div class="contents2">
			<p>There is no formal mechanism within the UIZE JavaScript Framework for declaring a state property as being read-only.</p>
			
			<p>There might be occasions when it's desirable to expose some instance state through a state property - with all the benefits that come from using state properties - without it being intended for application code to ever set the property's value. But the <code><a href="../reference/Uize.Class.html">Uize.Class</a></code> base class cannot distinguish between a state property's value being set from within the class' implementation, or from some application code using an instance of the class.</p>
			
			<p>In the event that a state property is intended only to reflect state that is maintained within a class' implementation, the property should just be documented as intended for read-only use in the documentation for the class. Incorrect setting of the property could cause code to fail, but in the rather open JavaScript language any number of other, more damaging things could be done by application code to trip up a class' implementation.</p>
			
			<p>In short, read-only state properties are more of a convention / design pattern than anything else. The many classes of the UIZE JavaScript Framework are certainly replete with examples of weakly "enforced" read-only properties.</p>
		</div>
	</div>
</div>

</div>

<script type="text/javascript">

Uize.module ({
	required:[
		'UizeSite.Page.Doc.library',
		'UizeSite.Page.Doc'
	],
	builder:function () {(window.page = UizeSite.Page.Doc ()).wireUi ()}
});

</script>

</body></html>



