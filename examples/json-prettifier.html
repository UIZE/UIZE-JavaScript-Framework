<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>JSON Prettifier | JavaScript Tools | UIZE JavaScript Framework</title>
	<meta name="keywords" content="tool featured Uize.Json"/>
	<meta name="description" content="Take ugly / unreadable JSON data and prettify it by re-serializing it. Make it look exactly how you want with the many serialization options provided."/>
	<link rel="alternate" type="application/rss+xml" title="UIZE JavaScript Framework - Latest News" href="http://www.uize.com/latest-news.rss"/>
	<link rel="stylesheet" href="../css/page.css"/>
	<link rel="stylesheet" href="../css/page.example.css"/>
	<link rel="stylesheet" href="../css/widget.tabs.css"/>
	<link rel="stylesheet" href="../examples/css/params-table.css"/>
	<link rel="stylesheet" href="../css/widget.dialog.css"/>
	<link rel="stylesheet" href="../css/widget.dialog.confirm.css"/>
	<style type="text/css">
		.main {
			padding-bottom:0;
		}

		/*** overrides to widget.tabs.css ***/
			#page_tabs {
				float:left;
				width:400px;
				margin-right:10px;
			}
			#page_tabs .tabBodyShell {
				height:351px;
			}
			#page_tabs .tabBodyShell textarea {
				font-family:courier;
				font-size:10px;
				width:100%;
				height:351px;
				padding:0;
				margin:0;
				border:none;
			}
		/*** overrides to params-table.css ***/
			.paramsTable {
				margin-top:20px;
				margin-bottom:5px;
			}
	</style>
</head>

<body>

<script type="text/javascript" src="../js/Uize.js"></script>

<h1 class="document-title">
	<a id="page-homeLink" href="../index.html" title="UIZE JavaScript Framework home"></a>
	<a href="../javascript-tool-examples.html" class="breadcrumb breadcrumbWithArrow">JAVASCRIPT TOOLS</a>
	JSON Prettifier
	<div id="page-actions" class="pageActions">
		<a href="source-code/json-prettifier.html" class="buttonLink">SOURCE</a>
	</div>
</h1>

<div class="main">
	<!-- explanation copy -->

	<div class="explanation">
		<p>The <b>JSON Prettifier</b> tool (which makes use of the <a href="../reference/Uize.Json.html"><code>Uize.Json</code></a> module) lets you enter crappy looking JSON data and then serialize it to your individual taste. The end result is neat, elegant, readable, well indented JSON formatted data. You can also take expanded JSON data and crunch it down to a one line string. A host of configuration options lets you tweak indentation, linebreaks, quote characters, key quoting, key padding and alignment, and key sorting. Or choose from one of the convenient preset configurations. Enter JSON text in the <b>"SOURCE JSON"</b> tab, and then get the serialized result in the <b>"SERIALIZED JSON"</b> tab. Play around with the test JSON data to start with.</p>
	</div>

	<div style="width:739px; margin:auto;">
		<div id="page_tabs" class="tabShell">
			<div class="tabStubShell">
				<a id="page_tabs_option0" class="tabStub" href="javascript://">SOURCE JSON</a>
				<a id="page_tabs_option1" class="tabStub" href="javascript://">SERIALIZED JSON</a>
				<br style="clear:left;"/>
			</div>
			<div class="tabBodyShell">
				<div id="page_tabs-option0TabBody" class="tabBodyInactive">
					<textarea id="page-sourceJson" wrap="off"></textarea>
				</div>
				<div id="page_tabs-option1TabBody" class="tabBodyInactive">
					<textarea id="page-serializedJson" wrap="off" readonly="readonly"></textarea>
				</div>
			</div>
		</div>

		<!-- UI for choosing serialization options -->

		<table id="page-paramsTable" class="paramsTable">
			<thead>
				<tr>
					<td colspan="2" class="tableHeading">JSON Serialization Parameters</td>
				</tr>
			</thead>
			<tr title="set all the options using a preset configuration">
				<td class="fieldLabel">presets</td>
				<td>
					<a id="page-presetPretty" href="javascript://">pretty</a>
					|
					<a id="page-presetCompact" href="javascript://">compact</a>
					|
					<a id="page-presetPaddedAndSorted" href="javascript://">padded &amp; sorted</a>
				</td>
			</tr>
			<tr title="try different numbers of spaces">
				<td class="fieldLabel">indentChars</td>
				<td><input id="page-indentChars" type="text" class="textInput"/></td>
			</tr>
			<tr title="try nothing, or one or more linebreaks">
				<td class="fieldLabel">linebreakChars</td>
				<td><textarea id="page-linebreakChars" class="textInput">

		</textarea></td>
			</tr>
			<tr>
				<td class="fieldLabel">quoteChar</td>
				<td>
					<input name="page-quoteChar" id="page-quoteCharSingle" type="radio" value="'"/><label for="page-quoteCharSingle">single quote</label>
					&nbsp;
					<input name="page-quoteChar" id="page-quoteCharDouble" type="radio" value="&quot;"/><label for="page-quoteCharDouble">double quote</label>
				</td>
			</tr>
			<tr title="try spaces around either or both sides of colon">
				<td class="fieldLabel">keyDelimiter</td>
				<td><input id="page-keyDelimiter" type="text" class="textInput"/></td>
			</tr>
			<tr title="pads keys to the length of the longest key">
				<td class="fieldLabel">padKeys</td>
				<td><input id="page-padKeys" type="checkbox"/></td>
			</tr>
			<tr title="only applicable if padKeys is true">
				<td class="fieldLabel">keyAlign</td>
				<td>
					<input name="page-keyAlign" id="page-keyAlignLeft" type="radio" value="left"/><label for="page-keyAlignLeft">left</label>
					&nbsp;
					<input name="page-keyAlign" id="page-keyAlignCenter" type="radio" value="center"/><label for="page-keyAlignCenter">center</label>
					&nbsp;
					<input name="page-keyAlign" id="page-keyAlignRight" type="radio" value="right"/><label for="page-keyAlignRight">right</label>
				</td>
			</tr>
			<tr title="auto all will quote all keys in object when any keys need quoting">
				<td class="fieldLabel">whenToQuoteKeys</td>
				<td>
					<input name="page-whenToQuoteKeys" id="page-whenToQuoteKeysAuto" type="radio" value="auto"/><label for="page-whenToQuoteKeysAuto">auto</label>
					&nbsp;
					<input name="page-whenToQuoteKeys" id="page-whenToQuoteKeysAutoAll" type="radio" value="auto all"/><label for="page-whenToQuoteKeysAutoAll">auto all</label>
					&nbsp;
					<input name="page-whenToQuoteKeys" id="page-whenToQuoteKeysAlways" type="radio" value="always"/><label for="page-whenToQuoteKeysAlways">always</label>
				</td>
			</tr>
			<tr title="sort keys in object hashes ASCIIbetically">
				<td class="fieldLabel">sortKeys</td>
				<td><input id="page-sortKeys" type="checkbox"/></td>
			</tr>
		</table>

		<a id="page-serialize" class="buttonLink" href="javascript://">SERIALIZE AGAIN</a>
		<a id="page-resetTestData" class="buttonLink" href="javascript://">RESET TEST DATA</a>

		<br style="clear:left;"/>
	</div>
</div>

<!-- JavaScript code to make the static HTML "come alive" -->

<script type="text/javascript">

Uize.module ({
	required:[
		'UizeSite.Page.Example',
		'Uize.Widget.Options.Tabbed',
		'Uize.Json',
		'Uize.Node.Form',
		'UizeSite.TestDataObject'
	],
	builder:function () {
		/*** create the example page widget ***/
			var page = window.page = UizeSite.Page.Example ();

		/*** add the tabs child widget ***/
			var tabs = page.addChild (
				'tabs',
				Uize.Widget.Options.Tabbed,
				{
					bodyClassActive:'tabBodyActive',
					bodyClassInactive:'tabBodyInactive',
					values:['source','serialized'],
					value:'serialized'
				}
			);
			tabs.wire (
				'Changed.value',
				function () {if (tabs + '' == 'serialized') serializeUsingCurrentSettings ()}
			);

		/*** code for doing the serializing ***/
			var presets = {
				pretty:{
					indentChars:'   ',
					linebreakChars:'\n',
					quoteChar:'\'',
					keyDelimiter:': ',
					padKeys:false,
					keyAlign:'left',
					whenToQuoteKeys:'auto',
					sortKeys:false
				},
				compact:{
					indentChars:'',
					linebreakChars:'',
					quoteChar:'\'',
					keyDelimiter:':',
					padKeys:false,
					keyAlign:'left',
					whenToQuoteKeys:'auto',
					sortKeys:false
				},
				paddedAndSorted:{
					indentChars:'   ',
					linebreakChars:'\n',
					quoteChar:'\'',
					keyDelimiter:' : ',
					padKeys:true,
					keyAlign:'left',
					whenToQuoteKeys:'auto all',
					sortKeys:true
				}
			};
			function choosePreset (presetName) {
				Uize.Node.Form.setValues (presets [presetName],page.get ('idPrefix') + '-');
			}
			function serializeUsingCurrentSettings () {
				page.setNodeValue (
					'serializedJson',
					Uize.Json.to (
						Uize.Json.from (page.getNodeValue ('sourceJson')),
						Uize.Node.Form.getValues (page.getNode ('paramsTable'),true,page.get ('idPrefix') + '-')
					)
				);
				tabs.set ({value:'serialized'});
			}
			function resetTestData () {
				page.setNodeValue ('sourceJson',Uize.Json.to (UizeSite.TestDataObject (),presets.pretty));
				serializeUsingCurrentSettings ();
			}

		/*** wire up the page widget ***/
			page.wireUi ();

		/*** wire up additional UI ***/
			page.wireNode ('serialize','click',serializeUsingCurrentSettings);
			page.wireNode (
				'resetTestData',
				'click',
				function () {
					page.confirm ({
						message:'Are you sure you would like to reset the source JSON to the test data?',
						yesHandler:resetTestData
					});
				}
			);
			page.wireNode ('serializedJson','click',function () {this.select ()});

			/*** wire preset links ***/
				function wirePresetLink (presetName) {
					page.wireNode (
						'preset' + Uize.capFirstChar (presetName),
						'click',
						function () {
							choosePreset (presetName);
							serializeUsingCurrentSettings ();
						}
					);
				}
				wirePresetLink ('pretty');
				wirePresetLink ('compact');
				wirePresetLink ('paddedAndSorted');

		/*** initialize state ***/
			choosePreset ('pretty');
			resetTestData ();
	}
});

</script>

</body>
</html>

