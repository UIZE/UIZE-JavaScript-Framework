<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Uize.Node.VirtualEvent.Edge | JavaScript Source Code | UIZE JavaScript Framework</title>
	<meta name="keywords" content="UIZE JavaScript Framework module source code"/>
	<meta name="description" content="This is the JavaScript source code for the Uize.Node.VirtualEvent.Edge module of the UIZE JavaScript Framework"/>
	<link rel="alternate" type="application/rss+xml" title="UIZE JavaScript Framework - Latest News" href="http://www.uize.com/latest-news.rss"/>
	<link rel="stylesheet" href="../../css/page.css"/>
	<link rel="stylesheet" href="../../css/page.source.css"/>
</head>

<body>

<script type="text/javascript" src="../../js/Uize.js"></script>

<h1 class="document-title">
	<a id="page-homeLink" href="../../index.html" title="UIZE JavaScript Framework home"></a>
	SOURCE CODE: Uize.Node.VirtualEvent.Edge
	<div class="pageActions">
		<a href="../Uize.Node.VirtualEvent.Edge.html" class="buttonLink">VIEW REFERENCE</a>
	</div>
</h1>

<pre>
/*______________
|       ______  |   U I Z E    J A V A S C R I P T    F R A M E W O R K
|     /      /  |   ---------------------------------------------------
|    /    O /   |    MODULE : Uize.Node.VirtualEvent Package
|   /    / /    |
|  /    / /  /| |    ONLINE : http://www.uize.com
| /____/ /__/_| | COPYRIGHT : (c)2009-2012 UIZE
|          /___ |   LICENSE : Available under MIT License or GNU General Public License
|_______________|             http://www.uize.com/license.html
*/

/* Module Meta Data
  type: Package
  importance: 1
  codeCompleteness: 100
  testCompleteness: 0
  docCompleteness: 100
*/

/*?
  Introduction
    The =Uize.Node.VirtualEvent.Edge= module implements virtual DOM events that can be used to detect when the mouse enters / exits nodes at specific edges.

    *DEVELOPERS:* `Chris van Rensburg`

    In a Nutshell
      The virtual DOM events provided in the =Uize.Node.VirtualEvent.Edge= module make it easy to wire up DOM nodes so that different things occur depending on at which edge the user enters a DOM node.

      So, for example, you could perform a different action when the user mouses over a node from the left side than when the user mouses over the same node from the right side.

      How It Works
        Edge virtual DOM events are implemented for a node by comparing the coordinates of the mouse - at the time that a =mouseover= or =mouseout= real DOM event occurs for a node - to the coordinates of the node itself.

        Based upon where the mouse is at the time that the =mouseover= or =mouseout= event is handled, an edge is determined based upon into which of four triangular divisions of the node the coordinates fall. The node is divided into four triangular segments by diagonal lines that run from top left to bottom right and from top right to bottom left. If the mouse coordinates fall into the leftmost triangular segment, then the left edge is chosen. If the coordinates fall into the topmost segment, then the top edge is chosen. If they fall into the rightmost segment, then the right edge is chosen. Finally, if they fall into the bottommost segment, then the bottom edge is chosen. If the edge at which a =mouseover= or =mouseout= event occurs corresponds to an edge for which a mouse-enter-at-edge or mouse-exit-at-edge virtual DOM event is wired, then the handler for that event will be executed.

        Limitations
          In the overwhelming majority of cases, the rather simple mechanism involved in determining the edge of entry or exit works quite reliably and is very accurate.

          However, there are some situations where the edge determination logic can produce what could be considered faulty results. One case is where one is connecting to a machine remotely through a system such as Microsoft's [[http://en.wikipedia.org/wiki/Remote_Desktop_Protocol][Remote Desktop Protocol]], where latencies can be introduced into the delivery of mouse events (that originate remotely) to the machine being controlled. While this is a somewhat rare case, the result is that a =mouseover= or =mouseout= event can be fired long after the mouse has already crossed an edge boundary of a node. Without having tracked mouse movement over time, where the mouse is at the time that the =mouseover= or =mouseout= event is first fired can provide a misleading indication of how the mouse got there. It could appear closest to the top edge, but it may have gotten there by entering from the left.

          Another (more likely) case where edge determination can become confused is when a node for which a mouse-enter-at-edge or mouse-exit-at-edge virtual DOM event is wired is being partially overlapped by another node, and where it is possible to enter or exit the wired node by transitioning between the wired node and the obscuring node. Neither of the two cases mentioned sufficiently detract from the value of the edge virtual DOM events, however.

      SEE A DEMO

      To see a demonstration of the edge virtual DOM events in action, visit the interactive [[../examples/edge-virtual-dom-events.html][Edge Virtual DOM Events]] example.

      Once you are done checking out the example, return to this reference to get the full scoop on all the virtual DOM events defined by this module.

      BACKGROUND READING

      For an in-depth discussion on virtual DOM events, see the reference for the =Uize.Node.VirtualEvent= module.

    Built-in Virtual DOM Events
      The =Uize.Node.VirtualEvent.Edge= module provides two main categories of built-in virtual DOM events: `Mouse-enter-at-edge Virtual DOM Events` and `Mouse-exit-at-edge Virtual DOM Events`.

      Mouse-enter-at-edge Virtual DOM Events
        Mouse-enter-at-edge virtual DOM events are events that are fired when the mouse enters a node at a specific edge (left, right, top, or bottom).

        Mouse-enter-at-edge Virtual DOM Event Static Methods
          The =Uize.Node.VirtualEvent.Edge= module provides the following static methods for making `Mouse-enter-at-edge Virtual DOM Events`...

          - =Uize.Node.VirtualEvent.Edge.mouseEnterLeft=
          - =Uize.Node.VirtualEvent.Edge.mouseEnterRight=
          - =Uize.Node.VirtualEvent.Edge.mouseEnterTop=
          - =Uize.Node.VirtualEvent.Edge.mouseEnterBottom=

        Mouse-enter-at-edge Registered Virtual DOM Event
          The =Uize.Node.VirtualEvent.Edge= module registers the following event names for `Mouse-enter-at-edge Virtual DOM Events`...

          - =mouseEnterLeft=
          - =mouseEnterRight=
          - =mouseEnterTop=
          - =mouseEnterBottom=

      Mouse-exit-at-edge Virtual DOM Events
        Mouse-exit-at-edge virtual DOM events are events that are fired when the mouse exits a node at a specific edge (left, right, top, or bottom).

        Mouse-exit-at-edge Virtual DOM Event Static Methods
          The =Uize.Node.VirtualEvent.Edge= module provides the following static methods for making `Mouse-exit-at-edge Virtual DOM Events`...

          - =Uize.Node.VirtualEvent.Edge.mouseExitLeft=
          - =Uize.Node.VirtualEvent.Edge.mouseExitRight=
          - =Uize.Node.VirtualEvent.Edge.mouseExitTop=
          - =Uize.Node.VirtualEvent.Edge.mouseExitBottom=

        Mouse-exit-at-edge Registered Virtual DOM Event
          The =Uize.Node.VirtualEvent.Edge= module registers the following event names for `Mouse-exit-at-edge Virtual DOM Events`...

          - =mouseExitLeft=
          - =mouseExitRight=
          - =mouseExitTop=
          - =mouseExitBottom=
*/

Uize.module ({
  name:'Uize.Node.VirtualEvent.Edge',
  builder:function () {
    /*** Variables for Scruncher Optimization ***/
      var
        _package = function () {},
        _true = true,
        _false = false
      ;

    /*** General Variables ***/
      var _edgeNames = ['left','right','top','bottom'];

    /*** Utility Functions ***/
      function _makeEdgeEventMaker (_isExit,_edgeNo) {
        var
          _edgeName = _edgeNames [_edgeNo],
          _eventName = 'mouse' + (_isExit ? 'Exit' : 'Enter') + Uize.capFirstChar (_edgeName),
          _triggerEventName = _isExit ? 'mouseout' : 'mouseover'
        ;
        Uize.Node.VirtualEvent.register (
          _eventName,
          function () {
            return Uize.Node.VirtualEvent.getCached (
              _eventName + '()',
              function (_node,_handler,_subWiringsOwnerId) {
                Uize.Node.wire (
                  _node,
                  _triggerEventName,
                  function (_event) {
                    var
                      _eventAbsPos = Uize.Node.getEventAbsPos (_event),
                      _nodeCoords = Uize.Node.getCoords (this)
                    ;
                    var
                      _xRelative =
                        (
                          _eventAbsPos.left -
                          _nodeCoords.left + parseFloat (Uize.Node.getStyle (this,'borderLeftWidth'))
                        )
                        / _nodeCoords.width,
                      _yRelative =
                        (
                          _eventAbsPos.top -
                          _nodeCoords.top + parseFloat (Uize.Node.getStyle (this,'borderTopWidth'))
                        )
                        / _nodeCoords.height,
                      _xHalf = _xRelative &gt;= .5 ? 1 : 0, // avoid Math.round method call, for performance
                      _yHalf = _yRelative &gt;= .5 ? 1 : 0, // avoid Math.round method call, for performance
                      _entryEdge =
                        (_xHalf ? 1 - _xRelative : _xRelative) &gt; // relative deviation from X edge
                        (_yHalf ? 1 - _yRelative : _yRelative)   // relative deviation from Y edge
                          ? _yHalf + 2
                          : _xHalf
                    ;
                    _entryEdge == _edgeNo &amp;&amp; _handler.call (_node,_event);
                  },
                  _subWiringsOwnerId
                );
              }
            );
          }
        );
      }

    /*** Public Static Methods ***/
      /*** mouseEnter[edge] Virtual DOM Events ***/
        _makeEdgeEventMaker (0,0);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseEnterLeft
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses over a node at the left edge.

                SYNTAX
                ...................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseEnterLeft ();
                ...................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseEnterLeft=
                - see related `Mouse-enter-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseEnterLeft
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseEnterLeft= static method.

                SYNTAX
                ................
                mouseEnterLeft()
                ................

                EXAMPLE
                ................................................................................
                Uize.Node.wire ('myNode','mouseEnterLeft()',function () {alert ('ENTER LEFT')});
                ................................................................................

                NOTES
                - see related `Mouse-enter-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (0,1);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseEnterRight
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses over a node at the right edge.

                SYNTAX
                ....................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseEnterRight ();
                ....................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseEnterRight=
                - see related `Mouse-enter-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseEnterRight
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseEnterRight= static method.

                SYNTAX
                .................
                mouseEnterRight()
                .................

                EXAMPLE
                ..................................................................................
                Uize.Node.wire ('myNode','mouseEnterRight()',function () {alert ('ENTER RIGHT')});
                ..................................................................................

                NOTES
                - see related `Mouse-enter-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (0,2);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseEnterTop
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses over a node at the top edge.

                SYNTAX
                ..................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseEnterTop ();
                ..................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseEnterTop=
                - see related `Mouse-enter-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseEnterTop
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseEnterTop= static method.

                SYNTAX
                ...............
                mouseEnterTop()
                ...............

                EXAMPLE
                ..............................................................................
                Uize.Node.wire ('myNode','mouseEnterTop()',function () {alert ('ENTER TOP')});
                ..............................................................................

                NOTES
                - see related `Mouse-enter-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (0,3);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseEnterBottom
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses over a node at the bottom edge.

                SYNTAX
                .....................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseEnterBottom ();
                .....................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseEnterBottom=
                - see related `Mouse-enter-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseEnterBottom
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseEnterBottom= static method.

                SYNTAX
                ..................
                mouseEnterBottom()
                ..................

                EXAMPLE
                ....................................................................................
                Uize.Node.wire ('myNode','mouseEnterBottom()',function () {alert ('ENTER BOTTOM')});
                ....................................................................................

                NOTES
                - see related `Mouse-enter-at-edge Registered Virtual DOM Event`
          */

      /*** mouseExit[edge] Virtual DOM Events ***/
        _makeEdgeEventMaker (1,0);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseExitLeft
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses out of a node at the left edge.

                SYNTAX
                ..................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseExitLeft ();
                ..................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseExitLeft=
                - see related `Mouse-exit-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseExitLeft
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseExitLeft= static method.

                SYNTAX
                ...............
                mouseExitLeft()
                ...............

                EXAMPLE
                ..............................................................................
                Uize.Node.wire ('myNode','mouseExitLeft()',function () {alert ('EXIT LEFT')});
                ..............................................................................

                NOTES
                - see related `Mouse-exit-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (1,1);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseExitRight
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses out of a node at the right edge.

                SYNTAX
                ...................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseExitRight ();
                ...................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseExitRight=
                - see related `Mouse-exit-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseExitRight
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseExitRight= static method.

                SYNTAX
                ................
                mouseExitRight()
                ................

                EXAMPLE
                ................................................................................
                Uize.Node.wire ('myNode','mouseExitRight()',function () {alert ('EXIT RIGHT')});
                ................................................................................

                NOTES
                - see related `Mouse-exit-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (1,2);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseExitTop
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses out of a node at the top edge.

                SYNTAX
                .................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseExitTop ();
                .................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseExitTop=
                - see related `Mouse-exit-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseExitTop
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseExitTop= static method.

                SYNTAX
                ..............
                mouseExitTop()
                ..............

                EXAMPLE
                ............................................................................
                Uize.Node.wire ('myNode','mouseExitTop()',function () {alert ('EXIT TOP')});
                ............................................................................

                NOTES
                - see related `Mouse-exit-at-edge Registered Virtual DOM Event`
          */

        _makeEdgeEventMaker (1,3);
          /*?
            Static Methods
              Uize.Node.VirtualEvent.Edge.mouseExitBottom
                Returns a `Virtual DOM Event` object, for an event that is fired whenever the user mouses out of a node at the bottom edge.

                SYNTAX
                ....................................................................
                virtualDomEventOBJ = Uize.Node.VirtualEvent.Edge.mouseExitBottom ();
                ....................................................................

                NOTES
                - this `Virtual DOM Event Maker` is registered with the name =mouseExitBottom=
                - see related `Mouse-exit-at-edge Virtual DOM Event Static Methods`

            Registered Virtual DOM Events
              mouseExitBottom
                The registered name for the `Virtual DOM Event Maker` that is implemented in the =Uize.Node.VirtualEvent.Edge.mouseExitBottom= static method.

                SYNTAX
                .................
                mouseExitBottom()
                .................

                EXAMPLE
                ..................................................................................
                Uize.Node.wire ('myNode','mouseExitBottom()',function () {alert ('EXIT BOTTOM')});
                ..................................................................................

                NOTES
                - see related `Mouse-exit-at-edge Registered Virtual DOM Event`
          */

    return _package;
  }
});


</pre>

<script type="text/javascript">

Uize.module ({
	required:[
		'UizeSite.Page.library',
		'UizeSite.Page'
	],
	builder:function () {(window.page = UizeSite.Page ()).wireUi ()}
});

</script>

</body></html>
